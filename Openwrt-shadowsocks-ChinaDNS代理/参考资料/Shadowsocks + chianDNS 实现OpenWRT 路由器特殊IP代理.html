<!DOCTYPE html>
<!-- saved from url=(0033)https://cokebar.info/archives/664 -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>
		Shadowsocks + ChnRoute 实现 OpenWRT / LEDE 路由器自动翻墙	</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="https://cokebar.info/xmlrpc.php">	

<!-- This site is optimized with the Yoast SEO plugin v8.1.2 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="这篇文章介绍的方法基于aa65535的 luci-app-shadowsocks，介绍了如何在OpenWRT / LEDE下配置自动翻墙，新版本支持在Luci下图形化配置，大大简化了配置过程。配置完成后，路由器本身获得自动翻墙能力，所有连入该路由的设备都可无障碍访问被墙的站点。是运行于路由器的透明代理。">
<link rel="canonical" href="https://cokebar.info/archives/664">
<link rel="publisher" href="https://plus.google.com/100962811920252176870">
<meta name="twitter:card" content="summary">
<meta name="twitter:description" content="这篇文章介绍的方法基于aa65535的 luci-app-shadowsocks，介绍了如何在OpenWRT / LEDE下配置自动翻墙，新版本支持在Luci下图形化配置，大大简化了配置过程。配置完成后，路由器本身获得自动翻墙能力，所有连入该路由的设备都可无障碍访问被墙的站点。是运行于路由器的透明代理。">
<meta name="twitter:title" content="Shadowsocks + ChnRoute 实现 OpenWRT / LEDE 路由器自动翻墙">
<meta name="twitter:site" content="@icokebar">
<meta name="twitter:image" content="https://cokebar.info/wp-content/uploads/2014/11/服务器管理1-1024x461.png">
<meta name="twitter:creator" content="@icokebar">
<script type="text/javascript" async="" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/cc.js"></script><script type="text/javascript" async="" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/linkid.js"></script><script async="" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/analytics.js"></script><script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Person","url":"https:\/\/cokebar.info\/","sameAs":["https:\/\/plus.google.com\/100962811920252176870","https:\/\/www.youtube.com\/user\/icokebar","https:\/\/twitter.com\/icokebar"],"@id":"#person","name":"Cokebar Chi"}</script>
<!-- / Yoast SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="飞羽博客 » Feed" href="https://cokebar.info/feed">
<link rel="alternate" type="application/rss+xml" title="飞羽博客 » 评论Feed" href="https://cokebar.info/comments/feed">
<link rel="alternate" type="application/rss+xml" title="飞羽博客 » Shadowsocks + ChnRoute 实现 OpenWRT / LEDE 路由器自动翻墙评论Feed" href="https://cokebar.info/archives/664/feed">
<link rel="stylesheet" id="cptch_stylesheet-css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/front_end_style.css" type="text/css" media="all">
<link rel="stylesheet" id="dashicons-css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/dashicons.min.css" type="text/css" media="all">
<link rel="stylesheet" id="cptch_desktop_style-css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/desktop_style.css" type="text/css" media="all">
<link rel="stylesheet" id="swiftype-css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/autocomplete.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-pgp-encrypted-emails-css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="travelify_style-css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/style(1).css" type="text/css" media="all">
<script type="text/javascript">
/* <![CDATA[ */
var swiftypeParams = {"engineKey":"dyNS51kVm1TM9nXr-z71"};
/* ]]> */
</script>
<script type="text/javascript" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/install_swiftype.min.js"></script>
<link rel="https://api.w.org/" href="https://cokebar.info/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://cokebar.info/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://cokebar.info/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 4.9.8">
<link rel="shortlink" href="https://cokebar.info/?p=664">
<link rel="alternate" type="application/json+oembed" href="https://cokebar.info/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcokebar.info%2Farchives%2F664">
<link rel="alternate" type="text/xml+oembed" href="https://cokebar.info/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcokebar.info%2Farchives%2F664&amp;format=xml">
<!-- 飞羽博客 Custom CSS Styles -->
<style type="text/css" media="screen">
body { background-image: none; }
</style>
<style type="text/css"> a{color: ;}#site-title a{color: ;}#site-title a:hover{color: ;}.wrapper{background-color: ;}.social-icons ul li a{color: ;}#main-nav a, #main-nav a:hover,#main-nav ul li.current-menu-item a,#main-nav ul li.current_page_ancestor a,#main-nav ul li.current-menu-ancestor a,#main-nav ul li.current_page_item a,#main-nav ul li:hover > a{color: ;}.widget, article{background-color: ;}.entry-title, .entry-title a, h1, h2, h3, h4, h5, h6, .widget-title{color: ;}a:focus, a:active, a:hover, .tags a:hover, .custom-gallery-title a, .widget-title a, #content ul a:hover,#content ol a:hover, .widget ul li a:hover, .entry-title a:hover, .entry-meta a:hover, #site-generator .copyright a:hover{color: ;}#main-nav{background-color: ; border-color: ;}#main-nav ul li ul, body{border-color: ;}#main-nav a:hover,#main-nav ul li.current-menu-item a,#main-nav ul li.current_page_ancestor a,#main-nav ul li.current-menu-ancestor a,#main-nav ul li.current_page_item a,#main-nav ul li:hover > a, #main-nav li:hover > a,#main-nav ul ul :hover > a,#main-nav a:focus{background-color: ;}#main-nav ul li ul li a:hover,#main-nav ul li ul li:hover > a,#main-nav ul li.current-menu-item ul li a:hover{color: ;}.entry-content{color: ;}input[type="reset"], input[type="button"], input[type="submit"], a.readmore, ::selection, #controllers a:hover, #controllers a.active, .pagination span, .pagination a:hover span{background-color: ; border-color: }blockquote{border-color: }#controllers a:hover, #controllers a.active{color: }input[type="reset"]:hover,input[type="button"]:hover,input[type="submit"]:hover,input[type="reset"]:active,input[type="button"]:active,input[type="submit"]:active, a.readmore:hover, a.readmore:active, ul.default-wp-page li a:hover, ul.default-wp-page li a:active{background-color: ; border-color: }</style>
    		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style><style type="text/css" id="custom-background-css">
body.custom-background { background-image: url("https://cokebar.info/wp-content/themes/travelify-mod/images/background.png"); background-position: left top; background-size: auto; background-repeat: repeat; background-attachment: scroll; }
</style>

</head>

<body class="post-template-default single single-post postid-664 single-format-standard custom-background  su-other-shortcodes-loaded" style="">
	
	<div class="wrapper">
				<header id="branding">
				
	<div class="container clearfix">
		<div class="hgroup-wrap clearfix">
					<section class="hgroup-right">
						
			<div class="social-icons clearfix">
				<ul><li class="rss"><a href="https://cokebar.info/feed/" title="飞羽博客 on RSS" target="_blank"></a></li>
			</ul>
			</div><!-- .social-icons -->					</section><!-- .hgroup-right -->	
				<hgroup id="site-logo" class="clearfix">
												<h1 id="site-title"> 
								<a href="https://cokebar.info/" title="飞羽博客" rel="home">
									飞羽博客								</a>
							</h1>
							<h2 id="site-description">一个专注于IT互联网的博客</h2>
											
				</hgroup><!-- #site-logo -->
			
		</div><!-- .hgroup-wrap -->
	</div><!-- .container -->	
		
	<nav id="main-nav" class="clearfix">
					<div class="container clearfix"><ul class="root l_tinynav1"><li id="menu-item-269" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-269"><a href="https://cokebar.info/">首页</a></li>
<li id="menu-item-273" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-273"><a href="https://cokebar.info/internet">互联网</a></li>
<li id="menu-item-275" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-275"><a href="https://cokebar.info/software">软件</a></li>
<li id="menu-item-272" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-272"><a href="https://cokebar.info/it-industry">IT业界</a></li>
<li id="menu-item-274" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-274"><a href="https://cokebar.info/program">编程</a></li>
<li id="menu-item-1184" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1184"><a href="https://cokebar.info/app_share">实用工具</a></li>
<li id="menu-item-270" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-270"><a href="https://cokebar.info/about">关于本站</a></li>
<li class="default-menu"><a href="https://cokebar.info/" title="Navigation">导航</a></li></ul><select class="tinynav tinynav1"><option value="//cokebar.info/">首页</option><option value="https://cokebar.info/internet">互联网</option><option value="https://cokebar.info/software">软件</option><option value="https://cokebar.info/it-industry">IT业界</option><option value="https://cokebar.info/program">编程</option><option value="https://cokebar.info/app_share">实用工具</option><option value="https://cokebar.info/about">关于本站</option><option value="https://cokebar.info" selected="selected">导航</option></select></div><!-- .container -->
					</nav><!-- #main-nav --> 		
				</header>
				<div id="main" class="container clearfix">


<div id="container">
	

<div id="primary" class="no-margin-left">
   <div id="content">	<section id="post-664" class="post-664 post type-post status-publish format-standard hentry category-openwrt category-anti-gfw tag-chinadns tag-chnroute tag-dnsmasq tag-lede tag-openwrt tag-shadowsocks tag-45 tag-96 tag-49">
		<article itemscope="" itemtype="http://schema.org/Article">

			
			<header class="entry-header">
    			<h2 itemprop="name" class="entry-title">
    				Shadowsocks + ChnRoute 实现 OpenWRT / LEDE 路由器自动翻墙    			</h2><!-- .entry-title -->
  		</header>

  		
  		
  			<div class="entry-meta-bar clearfix">
    			<div class="entry-meta">
	    				<span itemprop="author" class="vcard author"><a class="fn url" href="https://cokebar.info/archives/author/cokebar">cokebar</a></span>
					<span itemprop="datePublished" class="date published"><a href="https://cokebar.info/archives/664" rel="bookmark">2015-01-07 14:40</a></span>
	    				<span itemprop="dateModified" class="date updated"><a href="https://cokebar.info/archives/664" rel="bookmark">2018-09-09 11:44</a></span>
	    					             		<span itemprop="articleSection" class="category"><a href="https://cokebar.info/software/openwrt" rel="category tag">OpenWrt</a>, <a href="https://cokebar.info/internet/anti-gfw" rel="category tag">科学上网</a></span>
	             		    					             		<span class="comments"><a href="https://cokebar.info/archives/664#comments">1,918 条评论</a></span>
	             	    			</div><!-- .entry-meta -->
    		</div>

				
				
  			<div itemprop="articleBody" class="entry-content clearfix">
    			<p>本站发布的三种使用 shadowsocks 在 OpenWrt / LEDE 上的自动翻墙方案：</p>
<blockquote><p><strong><em>1、Shadowsocks + ChnRoute 实现 OpenWRT / LEDE 路由器自动翻墙</em></strong><br>
<em><del><a title="shadowsocks + redsocks 实现 OpenWRT 路由器自动翻墙" href="https://cokebar.info/archives/948">2、Shadowsocks + Redsocks 实现 OpenWRT 路由器自动翻墙</a></del> (停止更新)</em><br>
<em><a title="shadowsocks + gfwlist 实现 OpenWRT 路由器自动翻墙" href="https://cokebar.info/archives/962">3、Shadowsocks + GfwList 实现 OpenWRT / LEDE 路由器自动翻墙</a></em></p></blockquote>
<p>这篇文章介绍的方法基于aa65535的luci-app-shadowsocks/openwrt-shadowsocks，介绍了如何在OpenWRT / LEDE下配置自动翻墙，新版本支持在Luci下图形化配置，大大简化了配置过程。配置完成后，路由器本身获得自动翻墙能力，所有连入该路由的设备都可无障碍访问被墙的站点。是运行于路由器的透明代理。</p>
<div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>方案简介</div><div class="su-spoiler-content su-clearfix">方案根据IP判断是否代理，国内IP不代理，国外IP走代理。代理通过shadowsocks所带ss-redir做TCP转发实现，分国内外IP通过国内IP段列表文件chnroute来区别，并通过iptables规则分别处理。<p></p>
<p>由于是基于IP的判定，故需要解决DNS污染的问题，本方案使用优化的DNS解析方案，除过防DNS污染，同时具有良好的CDN兼容性，大部分情况下是最优的解析结果（缺点是配置过程稍繁琐）。</p>
<p>本方案进一步优化，增加GFWList和Dnsmasq-China-List，使得GFWList中域名强制走代理，而Dnsmasq-China-List中的域名则强制直连，并且可以自行定义强制走代理或者不走代理的域名</p></div></div>
<div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>本方案主要涉及到的开源项目</div><div class="su-spoiler-content su-clearfix"><a href="https://github.com/aa65535/openwrt-shadowsocks" target="_blank" rel="noopener noreferrer">https://github.com/aa65535/openwrt-shadowsocks</a><p></p>
<p><a href="https://github.com/shadowsocks/luci-app-shadowsocks" target="_blank" rel="noopener noreferrer">https://github.com/shadowsocks/luci-app-shadowsocks</a></p>
<p><a href="https://github.com/aa65535/openwrt-chinadns" target="_blank" rel="noopener noreferrer">https://github.com/aa65535/openwrt-chinadns</a></p>
<p><a href="https://github.com/aa65535/openwrt-dist-luci" target="_blank" rel="noopener noreferrer">https://github.com/aa65535/openwrt-dist-luci</a></p>
<p><a href="https://github.com/madeye/shadowsocks-libev" target="_blank" rel="noopener noreferrer">https://github.com/madeye/shadowsocks-libev</a></p>
<p><a title="ChinaDNS" href="https://github.com/clowwindy/ChinaDNS" target="_blank" rel="noopener noreferrer">https://github.com/clowwindy/ChinaDNS</a></p></div></div>
<div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>本文changelog</div><div class="su-spoiler-content su-clearfix">
[2018.04.16] 修正部分下载链接。<p></p>
[2018.04.16] 删除OpenWrt CC版本的安装说明；针对aa65535最新的静态链接编译的版本，修改安装步骤。<p></p>
[2018.02.23] 部分小错误修订，细节完善（如：增加WAN口DNS设置）。<p></p>
[2017.10.07] libcares代替libudns，更新安装说明。<p></p>
[2017.07.22] 跟进luci-app-shadowsocks 1.7.0版本，增加负载均衡说明，修订多进程和TFO的说明。<p></p>
[2017.06.05] 新增开启TCP Fast Open步骤；新增开启多进程、设置MTU的描述。新增changelog。<p></p>
[2017.04.09] “附加参数”设置修订。<p></p>
[2017.03.19] 修订安装步骤。<p></p>
[2017.02.22] 新增gfwlist配置自动生成脚本；修订chinalist配置自动生成脚本。<p></p>
[2017.02.09] 支持最新3.x版本shadowsocks-libev；新增LEDE安装说明。<p></p>
[2017.01.27] 变更DNS方案，DNS部分修订完成；DNS引入dns-forwarder，引入chinalist和gfwlist，新增chinalist配置自动生成脚本。<p></p>
[2016.12.9] aa65535变更包结构，包名改变；新增访问控制等大量新功能；文章根据新版本重写。<p></p>
[2014.12 – 2016.11] 各种修订。<p></p>
<blockquote>[2014-11-18] 首版发布，基于aa65535的shadowsocks-libev-spec。<p></p></blockquote>
</div></div>
<p><span style="color: #ff0000;"><strong>注:本文不再提供OpenWrt 15.05及以下版本的说明；仅支持LEDE 17.01, OpenWrt 18.06及后续版本</strong></span></p>
<h5>一、安装</h5>
<hr>
<p>适用于<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f0760870f4768954677" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">openwrt</span><span class="crayon-o">-</span><span class="crayon-v">shadowsocks</span></span></span>&nbsp;3.0.1及以上版本，搭配<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f0760870ff553781221" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">luci</span><span class="crayon-o">-</span><span class="crayon-v">app</span><span class="crayon-o">-</span><span class="crayon-v">shadowsocks</span></span></span>&nbsp;1.6.0及后续版本。</p>
<div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>所需软件列表</div><div class="su-spoiler-content su-clearfix">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087102624621413" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Vim</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">shadowsocks-libev (openwrt-shadowsocks)
luci-app-shadowsocks
ChinaDNS (openwrt-chinadns)
luci-app-ChinaDNS
DNS-forwarder (openwrt-dns-forwarder)
luci-app-dns-forwarder</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087102624621413-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087102624621413-2">2</div><div class="crayon-num" data-line="crayon-5b9f076087102624621413-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087102624621413-4">4</div><div class="crayon-num" data-line="crayon-5b9f076087102624621413-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087102624621413-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087102624621413-1"><span class="crayon-i">shadowsocks</span><span class="crayon-o">-</span><span class="crayon-e">libev</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">openwrt</span><span class="crayon-o">-</span><span class="crayon-i">shadowsocks</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087102624621413-2"><span class="crayon-i">luci</span><span class="crayon-o">-</span><span class="crayon-i">app</span><span class="crayon-o">-</span><span class="crayon-e">shadowsocks</span></div><div class="crayon-line" id="crayon-5b9f076087102624621413-3"><span class="crayon-e">ChinaDNS</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">openwrt</span><span class="crayon-o">-</span><span class="crayon-i">chinadns</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087102624621413-4"><span class="crayon-i">luci</span><span class="crayon-o">-</span><span class="crayon-i">app</span><span class="crayon-o">-</span><span class="crayon-e">ChinaDNS</span></div><div class="crayon-line" id="crayon-5b9f076087102624621413-5"><span class="crayon-i">DNS</span><span class="crayon-o">-</span><span class="crayon-e">forwarder</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">openwrt</span><span class="crayon-o">-</span><span class="crayon-i">dns</span><span class="crayon-o">-</span><span class="crayon-i">forwarder</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087102624621413-6"><span class="crayon-i">luci</span><span class="crayon-o">-</span><span class="crayon-i">app</span><span class="crayon-o">-</span><span class="crayon-i">dns</span><span class="crayon-o">-</span><span class="crayon-i">forwarder</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
</div></div>
<hr>
<p><span style="text-decoration: underline;"><span style="font-size: 16px;"><strong>方法一： 添加作者的软件源，直接利用opkg命令安装 (此方式快捷方便，推荐！)</strong></span></span></p>
<p>软件源位置：<a href="http://openwrt-dist.sourceforge.net/packages/" target="_blank" rel="noopener noreferrer">http://openwrt-dist.sourceforge.net/packages/</a></p>
<p>前提是所用网络环境直连sourceforge.net和downloads.lede-project.org没有问题。</p>
<p><strong>可以直接使用作者的一键脚本，执行：</strong></p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087105298837379" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">wget -qO- http://openwrt-dist.sourceforge.net/auto_install.sh | sh
# 执行此步骤时候按照提示，选择安装shadowsocks,chinadns以及dns-forwarder
opkg install ip-full iptables-mod-tproxy</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087105298837379-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087105298837379-2">2</div><div class="crayon-num" data-line="crayon-5b9f076087105298837379-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087105298837379-1"><span class="crayon-v">wget</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">qO</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-o">/</span><span class="crayon-v">openwrt</span><span class="crayon-o">-</span><span class="crayon-v">dist</span><span class="crayon-e">.sourceforge</span><span class="crayon-e">.net</span><span class="crayon-o">/</span><span class="crayon-v">auto_install</span><span class="crayon-e">.sh</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-r">sh</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087105298837379-2"><span class="crayon-c"># 执行此步骤时候按照提示，选择安装shadowsocks,chinadns以及dns-forwarder</span></div><div class="crayon-line" id="crayon-5b9f076087105298837379-3"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">ip</span><span class="crayon-o">-</span><span class="crayon-e">full </span><span class="crayon-v">iptables</span><span class="crayon-o">-</span><span class="crayon-v">mod</span><span class="crayon-o">-</span><span class="crayon-v">tproxy</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
</p><div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>此方法手动的步骤</div><div class="su-spoiler-content su-clearfix">
<p><strong>参照 <a href="http://openwrt-dist.sourceforge.net/" target="_blank" rel="noopener">http://openwrt-dist.sourceforge.net/</a> 里的说明：</strong></p>
<p>首先添加 a65535 的 gpg key，只有这样，第三方的包才能通过签名验证。执行：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087107570948694" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">wget -qO- http://openwrt-dist.sourceforge.net/openwrt-dist.pub | opkg-key add</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087107570948694-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087107570948694-1"><span class="crayon-v">wget</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">qO</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-o">/</span><span class="crayon-v">openwrt</span><span class="crayon-o">-</span><span class="crayon-v">dist</span><span class="crayon-e">.sourceforge</span><span class="crayon-e">.net</span><span class="crayon-o">/</span><span class="crayon-v">openwrt</span><span class="crayon-o">-</span><span class="crayon-v">dist</span><span class="crayon-e">.pub</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">opkg</span><span class="crayon-o">-</span><span class="crayon-e">key </span><span class="crayon-v">add</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
打开Luci，定位到“系统”-“软件包”-“配置”选项卡，在“自定义feeds”末尾加入两行并点击“提交”：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f07608710a803795718" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">src/gz openwrt_dist http://openwrt-dist.sourceforge.net/packages/base/mipsel_24kc
src/gz openwrt_dist_luci http://openwrt-dist.sourceforge.net/packages/luci</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f07608710a803795718-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608710a803795718-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f07608710a803795718-1"><span class="crayon-v">src</span><span class="crayon-o">/</span><span class="crayon-e">gz </span><span class="crayon-e">openwrt_dist </span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//openwrt-dist.sourceforge.net/packages/base/mipsel_24kc</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608710a803795718-2"><span class="crayon-v">src</span><span class="crayon-o">/</span><span class="crayon-e">gz </span><span class="crayon-e">openwrt_dist_luci </span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//openwrt-dist.sourceforge.net/packages/luci</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
请根据自己的CPU架构（可以执行 <link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f07608710c853995815" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">opkg </span><span class="crayon-v">print</span><span class="crayon-o">-</span><span class="crayon-v">architecture</span></span></span>&nbsp;查看，或者参考“发行版软件源”里的URL里的文本），将mipsel_24kc替换成相应的文本，最后点击提交。</p>
<p>然后执行命令<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f07608710f214251901" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">opkg </span><span class="crayon-v">update</span></span></span>&nbsp;更新软件列表，然后执行下列命令安装依赖包以及shadowsocks相关的软件：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087111039333311" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">opkg install ip-full ipset iptables-mod-tproxy libpthread
opkg install shadowsocks-libev luci-app-shadowsocks
opkg install ChinaDNS luci-app-chinadns
opkg install dns-forwarder luci-app-dns-forwarder</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087111039333311-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087111039333311-2">2</div><div class="crayon-num" data-line="crayon-5b9f076087111039333311-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087111039333311-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087111039333311-1"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">ip</span><span class="crayon-o">-</span><span class="crayon-e">full </span><span class="crayon-e">ipset </span><span class="crayon-v">iptables</span><span class="crayon-o">-</span><span class="crayon-v">mod</span><span class="crayon-o">-</span><span class="crayon-e">tproxy </span><span class="crayon-e">libpthread</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087111039333311-2"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">shadowsocks</span><span class="crayon-o">-</span><span class="crayon-e">libev </span><span class="crayon-v">luci</span><span class="crayon-o">-</span><span class="crayon-v">app</span><span class="crayon-o">-</span><span class="crayon-e">shadowsocks</span></div><div class="crayon-line" id="crayon-5b9f076087111039333311-3"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-e">ChinaDNS </span><span class="crayon-v">luci</span><span class="crayon-o">-</span><span class="crayon-v">app</span><span class="crayon-o">-</span><span class="crayon-e">chinadns</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087111039333311-4"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">dns</span><span class="crayon-o">-</span><span class="crayon-e">forwarder </span><span class="crayon-v">luci</span><span class="crayon-o">-</span><span class="crayon-v">app</span><span class="crayon-o">-</span><span class="crayon-v">dns</span><span class="crayon-o">-</span><span class="crayon-v">forwarder</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
</p></div></div>
<hr>
<p><span style="text-decoration: underline;"><span style="font-size: 16px;"><strong>方法二： 手动下载软件包，上传至路由器后安装</strong></span></span></p>
<p>如果直连遇到困难（无法连接或者过程中下载总是中断），请继续下面的步骤来安装。实测国内许多ISP，执行<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f076087114530435718" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">opkg </span><span class="crayon-v">update</span></span></span>&nbsp;和<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f076087117676100541" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-e">opkg </span><span class="crayon-v">install</span></span></span>&nbsp;下载安装的时候都可能会遇到卡住、中断的情况，请多试几次。如果尝试多次仍然失败，请参考下面的依赖列表，手动至官方下载站点手工下载。</p>
<div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>详细步骤点击展开</div><div class="su-spoiler-content su-clearfix">
<p><span style="font-size: 20px; color: #ff0000;"><strong>依赖包要装全！依赖包要装全！依赖包要装全！</strong></span>重要的事情说三遍！遇到安装问题请参考下列以来列表，看自己装全了没有！</p>
<p>依赖列表</p>
<p>右边注释为该包在官方软件源目录下划分到了哪一类 方便查找</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f07608711a472981299" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">libgcc # target/cpu型号/package目录下
libpthread # 同上
ip-full # base
ipset # base 无此包不能使用luci-app-shadowsocks
      #      只能使用luci-app-shadowsocks-without-ipset 性能会下降
iptables-mod-tproxy # base 无此包将无法代理UDP流量
zlib # base</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f07608711a472981299-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608711a472981299-2">2</div><div class="crayon-num" data-line="crayon-5b9f07608711a472981299-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608711a472981299-4">4</div><div class="crayon-num" data-line="crayon-5b9f07608711a472981299-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608711a472981299-6">6</div><div class="crayon-num" data-line="crayon-5b9f07608711a472981299-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f07608711a472981299-1"><span class="crayon-v">libgcc</span><span class="crayon-h"> </span><span class="crayon-p"># target/cpu型号/package目录下</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608711a472981299-2"><span class="crayon-v">libpthread</span><span class="crayon-h"> </span><span class="crayon-p"># 同上</span></div><div class="crayon-line" id="crayon-5b9f07608711a472981299-3"><span class="crayon-v">ip</span><span class="crayon-o">-</span><span class="crayon-v">full</span><span class="crayon-h"> </span><span class="crayon-p"># base</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608711a472981299-4"><span class="crayon-v">ipset</span><span class="crayon-h"> </span><span class="crayon-p"># base 无此包不能使用luci-app-shadowsocks</span></div><div class="crayon-line" id="crayon-5b9f07608711a472981299-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;只能使用luci-app-shadowsocks-without-ipset 性能会下降</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608711a472981299-6"><span class="crayon-v">iptables</span><span class="crayon-o">-</span><span class="crayon-v">mod</span><span class="crayon-o">-</span><span class="crayon-v">tproxy</span><span class="crayon-h"> </span><span class="crayon-p"># base 无此包将无法代理UDP流量</span></div><div class="crayon-line" id="crayon-5b9f07608711a472981299-7"><span class="crayon-v">zlib</span><span class="crayon-h"> </span><span class="crayon-p"># base</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
安装过程中如果出现错误提示无法解决，可以留言。</p>
<p>首次安装的话，先确保路由器联网，并更新软件包列表：</p>
<p><strong>注：部分ISP访问OpenWrt官方站点可能会非常缓慢甚至下载失败，此时需要自行在PC上下载上面的依赖包以后自行上传至路由器目录手动安装。</strong></p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f07608711d507827736" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">opkg update</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f07608711d507827736-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f07608711d507827736-1"><span class="crayon-e">opkg </span><span class="crayon-v">update</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
首先，需要手动安装部分依赖包（并不是所有的依赖包，部分依赖包会自动从软件仓库安装）</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087121793204579" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">opkg install ip-full ipset iptables-mod-tproxy libpthread</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087121793204579-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087121793204579-1"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">ip</span><span class="crayon-o">-</span><span class="crayon-e">full </span><span class="crayon-e">ipset </span><span class="crayon-v">iptables</span><span class="crayon-o">-</span><span class="crayon-v">mod</span><span class="crayon-o">-</span><span class="crayon-e">tproxy </span><span class="crayon-v">libpthread</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
接下来下载软件，注意需要根据自己的CPU内核架构来进行选择。可使用如下命令查看架构类型：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087123134492716" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">opkg print-architecture</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087123134492716-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087123134492716-1"><span class="crayon-e">opkg </span><span class="crayon-v">print</span><span class="crayon-o">-</span><span class="crayon-v">architecture</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
下载地址：&nbsp;<a href="http://openwrt-dist.sourceforge.net/packages/" target="_blank" rel="noopener noreferrer">http://openwrt-dist.sourceforge.net/packages/</a></p>
<p>需要下载的文件：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087124655338613" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">shadowsocks-libev_x.x.x-x_xxxx.ipk
dns-forwarder_x.x.x-x_xxxx.ipk
ChinaDNS_x.x.x-x_xxxx.ipk
luci-app-shadowsocks_x.x.x-x_all.ipk
luci-app-chinadns_x.x.x-x_all.ipk
luci-app-dns-forwarder_x.x.x-x_all.ipk</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087124655338613-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087124655338613-2">2</div><div class="crayon-num" data-line="crayon-5b9f076087124655338613-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087124655338613-4">4</div><div class="crayon-num" data-line="crayon-5b9f076087124655338613-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087124655338613-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087124655338613-1"><span class="crayon-v">shadowsocks</span><span class="crayon-o">-</span><span class="crayon-v">libev_x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-o">-</span><span class="crayon-v">x_xxxx</span><span class="crayon-sy">.</span><span class="crayon-e">ipk</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087124655338613-2"><span class="crayon-v">dns</span><span class="crayon-o">-</span><span class="crayon-v">forwarder_x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-o">-</span><span class="crayon-v">x_xxxx</span><span class="crayon-sy">.</span><span class="crayon-e">ipk</span></div><div class="crayon-line" id="crayon-5b9f076087124655338613-3"><span class="crayon-v">ChinaDNS_x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-o">-</span><span class="crayon-v">x_xxxx</span><span class="crayon-sy">.</span><span class="crayon-e">ipk</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087124655338613-4"><span class="crayon-v">luci</span><span class="crayon-o">-</span><span class="crayon-v">app</span><span class="crayon-o">-</span><span class="crayon-v">shadowsocks_x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-o">-</span><span class="crayon-v">x_all</span><span class="crayon-sy">.</span><span class="crayon-e">ipk</span></div><div class="crayon-line" id="crayon-5b9f076087124655338613-5"><span class="crayon-v">luci</span><span class="crayon-o">-</span><span class="crayon-v">app</span><span class="crayon-o">-</span><span class="crayon-v">chinadns_x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-o">-</span><span class="crayon-v">x_all</span><span class="crayon-sy">.</span><span class="crayon-e">ipk</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087124655338613-6"><span class="crayon-v">luci</span><span class="crayon-o">-</span><span class="crayon-v">app</span><span class="crayon-o">-</span><span class="crayon-v">dns</span><span class="crayon-o">-</span><span class="crayon-v">forwarder_x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-o">-</span><span class="crayon-v">x_all</span><span class="crayon-sy">.</span><span class="crayon-v">ipk</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
将下载的包通过WinSCP之类的工具上传至路由器的/tmp目录。</p>
<p>安装shadowsocks, ChinaDNS以及dns-forwarder：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087126330401973" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">cd /tmp
opkg install shadowsocks-libev*.ipk luci-app-shadowsocks*.ipk
opkg install ChinaDNS*.ipk luci-app-chinadns*.ipk
opkg install dns-forwarder*.ipk luci-app-dns-forwarder*.ipk</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087126330401973-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087126330401973-2">2</div><div class="crayon-num" data-line="crayon-5b9f076087126330401973-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087126330401973-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087126330401973-1"><span class="crayon-r">cd</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-e">tmp</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087126330401973-2"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">shadowsocks</span><span class="crayon-o">-</span><span class="crayon-v">libev</span><span class="crayon-o">*</span><span class="crayon-e">.ipk</span><span class="crayon-h"> </span><span class="crayon-v">luci</span><span class="crayon-o">-</span><span class="crayon-v">app</span><span class="crayon-o">-</span><span class="crayon-v">shadowsocks</span><span class="crayon-o">*</span><span class="crayon-e">.ipk</span></div><div class="crayon-line" id="crayon-5b9f076087126330401973-3"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">ChinaDNS</span><span class="crayon-o">*</span><span class="crayon-e">.ipk</span><span class="crayon-h"> </span><span class="crayon-v">luci</span><span class="crayon-o">-</span><span class="crayon-v">app</span><span class="crayon-o">-</span><span class="crayon-v">chinadns</span><span class="crayon-o">*</span><span class="crayon-e">.ipk</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087126330401973-4"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">dns</span><span class="crayon-o">-</span><span class="crayon-v">forwarder</span><span class="crayon-o">*</span><span class="crayon-e">.ipk</span><span class="crayon-h"> </span><span class="crayon-v">luci</span><span class="crayon-o">-</span><span class="crayon-v">app</span><span class="crayon-o">-</span><span class="crayon-v">dns</span><span class="crayon-o">-</span><span class="crayon-v">forwarder</span><span class="crayon-o">*</span><span class="crayon-e">.ipk</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
</p></div></div>
<h5>二、shadowsocks 配置</h5>
<hr>
<p>登录Luci，指向“服务”，此时应该能够看到shadowsocks（中文界面下显示“影梭”）了。接下来进行shadowsocks的配置。</p>
<div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>I. 添加服务器</div><div class="su-spoiler-content su-clearfix">
<p>切换到“服务器管理”选项卡，点击“添加”来增加一个服务器配置信息。你也可以同时添加多个服务器配置信息，如下图：</p>
<p><a href="https://cokebar.info/wp-content/uploads/2014/11/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%861.png"><img class="alignnone size-large wp-image-1699" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/服务器管理1-1024x461.png" alt="%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ae%a1%e7%90%861" width="700" height="315" srcset="https://cokebar.info/wp-content/uploads/2014/11/服务器管理1-1024x461.png 1024w, https://cokebar.info/wp-content/uploads/2014/11/服务器管理1-300x135.png 300w, https://cokebar.info/wp-content/uploads/2014/11/服务器管理1-768x345.png 768w, https://cokebar.info/wp-content/uploads/2014/11/服务器管理1-1018x460.png 1018w, https://cokebar.info/wp-content/uploads/2014/11/服务器管理1-150x67.png 150w, https://cokebar.info/wp-content/uploads/2014/11/服务器管理1.png 1563w" sizes="(max-width: 700px) 100vw, 700px"></a></p>
<p>添加一个服务器配置后，就要填写服务器配置（如下图），服务器地址、服务器端口、密码、加密方式是必须的。建议在别名中为当前配置文件起一个名字；填入信息后保存&amp;应用。插件名称和插件参数留空，因为插件的使用不是本文的讨论范围。<span style="color: #ff0000;">服务器地址需要填入IP地址。</span></p>
<p><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/serverconf.png"><img class="alignnone size-full wp-image-1872" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/serverconf.png" alt="" width="382" height="413" srcset="https://cokebar.info/wp-content/uploads/2014/11/serverconf.png 382w, https://cokebar.info/wp-content/uploads/2014/11/serverconf-277x300.png 277w, https://cokebar.info/wp-content/uploads/2014/11/serverconf-139x150.png 139w" sizes="(max-width: 382px) 100vw, 382px"></a></p>
<hr>
</div></div><div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>II. 设置代理方案</div><div class="su-spoiler-content su-clearfix">
<p>接着切换到“访问控制”页面，一种配置举例如下图：</p>
<p><a href="https://cokebar.info/wp-content/uploads/2014/11/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6.png"><img class="alignnone size-large wp-image-1798" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/访问控制-933x1024.png" alt="" width="700" height="768" srcset="https://cokebar.info/wp-content/uploads/2014/11/访问控制-933x1024.png 933w, https://cokebar.info/wp-content/uploads/2014/11/访问控制-273x300.png 273w, https://cokebar.info/wp-content/uploads/2014/11/访问控制-768x843.png 768w, https://cokebar.info/wp-content/uploads/2014/11/访问控制-137x150.png 137w" sizes="(max-width: 700px) 100vw, 700px"></a></p>
<p>简单的说明一下图中配置的应用场景：</p>
<p>路由器多人共用，只有我使用shadowsocks，因此设置“代理类型”为“直接连接”，此时连入路由的设备访问网络时候默认直连，不走shadowsocks；而我有一台PC、一部手机、一台平板需要走代理，在“内网主机”中配置这三台设备的IP的代理类型为“正常代理”，还有一台PS4，联网游戏需要全局代理，设置他的IP（图中192.168.X.102）的代理类型为“全局代理”；还有一台下载机和一个物联网监控设备，不能让它们走代理，设置他们的IP（192.168.X.103/105）为“直接连接”。</p>
<p>具体使用时，需要根据自己的情况设置。多数情况设置代理类型为“正常代理”即可。具体每个选项的解释如下：</p>
<p><span style="font-size: 16px;"><strong><span style="text-decoration: underline;">外网区域：控制访问哪些外网地址时走代理/不走代理</span></strong></span></p>
<p><strong>忽略列表文件</strong>：访问在这个列表中的IP时，不经过shadowsocks代理。这个方案使用chnroute文件作为忽略文件，只有配置了这个文件，shadowsocks才可以自动区分国内和国外IP。由于安装ChinaDNS的带有这个路由表文件，就选择“ChinaDNS路由表”。</p>
<p>不过这个列表需要定期更新，ChinaDNS安装时候附带的那个比较老旧了，需要更新，执行以下命令手动更新（建议ss开启时候更新，更新完后记得重启ss），请确保看到进度条走满，并检查最终的<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f076087129819438640" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">chinadns_chnroute</span><span class="crayon-sy">.</span><span class="crayon-v">txt</span></span></span>&nbsp;文件，文件中应该是每行一个CIDR。更新过程如果中断，请重试，更新前请备份之前的文件以免出问题。更新完成后，需要重启shadowsocks。</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f07608712a188706374" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">wget -O- 'http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest' | awk -F\| '/CN\|ipv4/ { printf("%s/%d\n", $4, 32-log($5)/log(2)) }' &gt; /etc/chinadns_chnroute.txt</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f07608712a188706374-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f07608712a188706374-1"><span class="crayon-v">wget</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">O</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-s">'http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest'</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-r">awk</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">F</span><span class="crayon-sy">\</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-s">'/CN\|ipv4/ { printf("%s/%d\n", $4, 32-log($5)/log(2)) }'</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">chinadns_chnroute</span><span class="crayon-e">.txt</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
<strong>额外被忽略IP</strong>：这个列表中的IP强制绕过shadowsocks代理，如果有多shadowsocks服务器的可以将所有服务器的IP填进去，如果是单服务器不用填；其他按需添加。</p>
<p><strong>强制走代理IP</strong>：这个列表中的IP强制走shadowsocks代理，填入8.8.8.8和8.8.4.4，其他按需添加。</p>
<p>&nbsp;</p>
<p><span style="font-size: 16px;"><strong><span style="text-decoration: underline;">内网区域：控制连入路由的设备访问网络时候的代理方式</span></strong></span></p>
<p>共三种代理方式可选：</p>
<p>1.正常代理：使用外网区域设置的方式。</p>
<p>2.直接连接：忽略外网区域的设置，不走代理。</p>
<p>3.全局代理：忽略外网区域的设置，强制走代理。</p>
<p>具体到每个选项：</p>
<p><strong>网络接口</strong>：shadowsocks只作用于勾选了的网络接口。默认OpenWRT/LEDE只有一个LAN区域，此处也只会显示一个接口，也就是：“桥接：br-lan”；一般情况勾选它就行。当路由配置了多个LAN区域时候，则会显示多个，比如配置了访客网络，勾选访客网络的接口就可以让shadowsocks的配置在访客网络中生效；如果你不想让访客访问网络时走代理，那么这里不勾选即可。</p>
<p><strong>代理类型</strong>：连入路由的设备访问网络时，默认的代理方式。</p>
<p><strong>代理自身</strong>：路由设备自身访问网络时的代理方式。使用本文方案时请选择“正常代理”或者“全局”</p>
<p><strong>内网主机</strong>：单独配置内网特定IP的代理方式，优先级更高。需要为设备划分固定IP地址已达到最佳效果。</p>
<p>全部完成后，点击保存&amp;应用。</p>
<hr>
</div></div><div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>III. 开启代理服务</div><div class="su-spoiler-content su-clearfix">
<p>最后切换到常规设置，来完成最终的配置：</p>
<p><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/startss-2017-6-15.png"><img class="alignnone wp-image-2109" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/startss-2017-6-15.png" alt="" width="400" height="606" srcset="https://cokebar.info/wp-content/uploads/2014/11/startss-2017-6-15.png 621w, https://cokebar.info/wp-content/uploads/2014/11/startss-2017-6-15-198x300.png 198w, https://cokebar.info/wp-content/uploads/2014/11/startss-2017-6-15-99x150.png 99w" sizes="(max-width: 400px) 100vw, 400px"></a></p>
<p><span style="text-decoration: underline;"><span style="font-size: 16px;"><strong>运行状态：</strong></span></span></p>
<p><strong>透明代理</strong>： ss-redir的运行状态，shadowosocks代理的基础服务，提供TCP/UDP透明代理。</p>
<p><strong>socks5代理</strong>：ss-local的运行状态，shadowsocks的socks5代理功能，路由器作为socks5代理服务器。</p>
<p><strong>端口转发</strong>：ss-tunnel的运行状态，通常用作转发DNS。</p>
<p><span style="text-decoration: underline;"><strong><span style="font-size: 16px;">透明代理：</span></strong></span></p>
<p><strong>主服务器</strong>：透明代理使用的默认服务器（TCP透明代理、端口转发两个功能会使用这里选择的服务器），此处从列表中选择你需要使用的服务器。</p>
<p><strong>UDP服务器</strong>：UDP透明代理使用的服务器，可以和主服务器一致，也可以不同（也就是可以使用不同的服务器分别代理TCP和UDP连接）。在代理一些外服网络游戏的时候可能比较有用，其他多数情况下可以关闭。开启此项需要服务器支持，服务器端需要开启UDP功能。</p>
<p><strong>本地端口</strong>：shadowsocks服务需要占用一个路由器端口，推荐保留默认，但不能和其他运行的程序有冲突，也不能和下面”socks5代理”和“端口转发”中的本地端口冲突。</p>
<p><strong>更新MTU</strong>：手工指定MTU值传递给shadowsocks。通常PPPoE宽带连接为1492（也是此处默认值），网线直连以太网为1500。通过执行<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f07608712e250836679" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">ifconfig</span></span></span>&nbsp;可查看MTU值（找到wan口对应网卡设备即可）。也可以通过ping命令测试，具体步骤请超出本文讨论范围，不再叙述。</p>
<p><span style="text-decoration: underline;"><strong><span style="font-size: 16px;">socks5代理：</span></strong></span></p>
<p>有需要就开吧，不知道有用没的话就停用。</p>
<p><span style="text-decoration: underline;"><strong><span style="font-size: 16px;">端口转发：</span></strong></span></p>
<p>通常用于转发DNS请求，本文的方法未用到此功能，不用开启。如需要UDP方式的国外DNS解析，可用这个功能替换掉dns-forwarder.</p>
<p>最后再次保存&amp;应用，并刷新页面，看到“运行状态”中对应的项目显示运行中即表示成功。</p>
<hr>
</div></div><div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>IV. 额外的优化</div><div class="su-spoiler-content su-clearfix">
<p><strong>1. 避免高端口走代理</strong></p>
<p>在访问控制→附加参数中选择自定义，填入<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f076087130886349348" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-o">--</span><span class="crayon-i">dport</span><span class="crayon-h"> </span><span class="crayon-cn">22</span><span class="crayon-o">:</span><span class="crayon-cn">1023</span></span></span>&nbsp;，这样可以避免高端口走代理。P2P类下载软件，多使用高端口，这样的设置可以避免此类软件走代理从而产生高额流量。也可以选择只代理53/80/443。</p>
<p>你也可以自定义，其实就是iptables的额外参数，举例：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087131018571772" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">-m multiport --destination-port 22,53,80,443,3389,29986</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087131018571772-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087131018571772-1"><span class="crayon-o">-</span><span class="crayon-i">m</span><span class="crayon-h"> </span><span class="crayon-v">multiport</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">destination</span><span class="crayon-o">-</span><span class="crayon-i">port</span><span class="crayon-h"> </span><span class="crayon-cn">22</span><span class="crayon-sy">,</span><span class="crayon-cn">53</span><span class="crayon-sy">,</span><span class="crayon-cn">80</span><span class="crayon-sy">,</span><span class="crayon-cn">443</span><span class="crayon-sy">,</span><span class="crayon-cn">3389</span><span class="crayon-sy">,</span><span class="crayon-cn">29986</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
<strong>2. 开启 TCP Fast Open&nbsp;（TCP快速打开，缩略为TFO）</strong></p>
<p><span style="text-decoration: underline;">需求： 系统内核版本≥3.7，shadowsocks-libev≥3.0.4，luci-app-shadowsocks≥1.6.3；shadowsocks服务端开启tcp fast open。</span></p>
<p>修改<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f076087132331580943" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">sysctl</span><span class="crayon-sy">.</span><span class="crayon-v">conf</span></span></span>&nbsp;，加入如下一行：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087134379193720" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">net.ipv4.tcp_fastopen = 3</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087134379193720-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087134379193720-1"><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">ipv4</span><span class="crayon-sy">.</span><span class="crayon-v">tcp_fastopen</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
执行如下命令使之生效：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087135671122698" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">sysctl -p</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087135671122698-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087135671122698-1"><span class="crayon-v">sysctl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">p</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
然后在luci-app-shadowsocks的服务器设置中勾选TCP快速打开即可:</p>
<p><del><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/tfo-ss.png"><img class="alignnone size-full wp-image-2106" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/tfo-ss.png" alt="" width="523" height="233" srcset="https://cokebar.info/wp-content/uploads/2014/11/tfo-ss.png 523w, https://cokebar.info/wp-content/uploads/2014/11/tfo-ss-300x134.png 300w, https://cokebar.info/wp-content/uploads/2014/11/tfo-ss-150x67.png 150w" sizes="(max-width: 523px) 100vw, 523px"></a></del></p>
<p>保存并应用即可。</p>
<p><strong>2. 多服务器负载均衡</strong></p>
<p>负载均衡可以使用多个服务器同时代理，使用时不同的TCP连接会分别分配到不同的服务器上，因此在多线程下载/上传时候可以做到带宽叠加提升速度。1.7.0版本加入此特性，使用方法也很简单，点击主服务器右边的加号再添加一个服务器即可，使用前请确保CPU不成为性能瓶颈，否则也只是徒增负载而已。注意使用多服务器负载均衡时, 可能会导致某些网站登录异常。</p>
<p><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/multi-server.png"><img class="alignnone size-full wp-image-2165" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/multi-server.png" alt="" width="531" height="143" srcset="https://cokebar.info/wp-content/uploads/2014/11/multi-server.png 531w, https://cokebar.info/wp-content/uploads/2014/11/multi-server-300x81.png 300w, https://cokebar.info/wp-content/uploads/2014/11/multi-server-150x40.png 150w" sizes="(max-width: 531px) 100vw, 531px"></a></p>
<p>下面的描述针对使用多核心CPU的用户：</p>
<p>上面的配置其实是对HK2和HK1两个服务器分别开了一个进程，如果使用的是多核心CPU的路由器，建议使用多服务负载均衡，将进程数开到和CPU核心数（有超线程技术的则是和线程数）保持一致。如果不想使用多服务器负载均衡，只是想使用单一服务器，或者只有一个服务器可用，那么可以添加相同的主服务器，这样虽然对于网速没有改善，不过可以充分利用多核心的性能。</p>
<p><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/multi-process.png"><img class="alignnone size-full wp-image-2164" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/multi-process.png" alt="" width="488" height="115" srcset="https://cokebar.info/wp-content/uploads/2014/11/multi-process.png 488w, https://cokebar.info/wp-content/uploads/2014/11/multi-process-300x71.png 300w, https://cokebar.info/wp-content/uploads/2014/11/multi-process-150x35.png 150w" sizes="(max-width: 488px) 100vw, 488px"></a></p>
<p>&nbsp;</p>
</div></div>
<h5>二、DNS配置</h5>
<hr>
<p>到此虽然shadowsocks配置完成，不过还没有进行DNS部分的配置，只有完成了DNS的配置才能解决DNS污染并优化DNS解析，接下来的部分来对DNS的配置进行说明。</p>
<p>PS：DNS的调试可以使用<a href="https://cokebar.info/archives/402" target="_blank" rel="noopener noreferrer">dig</a>。</p>
<div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>I. DNS转发链图示</div><div class="su-spoiler-content su-clearfix">
<p>完整的DNS转发链如下图所示，先在dnsmasq这一层利用China-List和GFWList进行国内和国外域名区分，不在这两个列表中的域名交给ChinaDNS来区分；区分完毕后，国内的直接通过UDP协议交给国内DNS处理，国外的则会先利用dns-forwarder转成TCP协议后，走shadowsocks代理后交给国外DNS处理。</p>
<p>之所以交给国外DNS查询之前要转成TCP协议，是因为实际使用时候发现，UDP方式的查询在很多ISP的网络中不稳定，会造成各种异常，甚至使得ChinaDNS卡死，而且UDP方式对于部分特殊ISP甚至完全不可用；而TCP方式较为稳定，不过会相对慢一些，但绝大数情况下不会有明显差异。因此本文默认使用TCP方式。如果你需要使用UDP方式，那么请使用shadowsocks的端口转发（ss-tunnel）替换此处的dns-forwarder。</p>
<p>其他转TCP查询的方式可以参考：<a href="https://cokebar.info/archives/1053" target="_blank" rel="noopener noreferrer">《TCP 方式查询解决 DNS 污染问题》</a></p>
<p><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/DNS-转发链.png"><img class="alignnone size-full wp-image-1797" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/DNS-转发链.png" alt="" width="809" height="620" srcset="https://cokebar.info/wp-content/uploads/2014/11/DNS-转发链.png 809w, https://cokebar.info/wp-content/uploads/2014/11/DNS-转发链-300x230.png 300w, https://cokebar.info/wp-content/uploads/2014/11/DNS-转发链-768x589.png 768w, https://cokebar.info/wp-content/uploads/2014/11/DNS-转发链-150x115.png 150w" sizes="(max-width: 809px) 100vw, 809px"></a></p>
<p><a id="mao1"></a></p></div></div><div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>II. DNS转发链的基本配置</div><div class="su-spoiler-content su-clearfix">
<p>luci界面，“服务”→”DNS 转发”（英文界面是DNS Forwarder），如图配置：</p>
<p><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/dns-forwarder.png"><img class="alignnone wp-image-1738" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/dns-forwarder.png" alt="dns-forwarder" width="290" height="177" srcset="https://cokebar.info/wp-content/uploads/2014/11/dns-forwarder.png 609w, https://cokebar.info/wp-content/uploads/2014/11/dns-forwarder-300x183.png 300w, https://cokebar.info/wp-content/uploads/2014/11/dns-forwarder-150x92.png 150w" sizes="(max-width: 290px) 100vw, 290px"></a></p>
<p>“服务”→”ChinaDNS”，如图配置，建议修改114.114.114.114为你ISP的DNS地址（此处5311为DNS Forwarder的监听端口，需要和上面dns-forwarder设置保持一致）：</p>
<p><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/chinadns-1.png"><img class="alignnone wp-image-1739" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/chinadns-1.png" alt="chinadns" width="322" height="197" srcset="https://cokebar.info/wp-content/uploads/2014/11/chinadns-1.png 853w, https://cokebar.info/wp-content/uploads/2014/11/chinadns-1-300x183.png 300w, https://cokebar.info/wp-content/uploads/2014/11/chinadns-1-768x469.png 768w, https://cokebar.info/wp-content/uploads/2014/11/chinadns-1-150x92.png 150w" sizes="(max-width: 322px) 100vw, 322px"></a></p>
<p>在Luci中切换至“网络”-“DHCP/DNS”设置，如下图，在”DNS转发”中填入：127.0.0.1#5353</p>
<p><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/DNS.png"><img class="alignnone wp-image-1741" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/DNS.png" alt="dns" width="397" height="54" srcset="https://cokebar.info/wp-content/uploads/2014/11/DNS.png 914w, https://cokebar.info/wp-content/uploads/2014/11/DNS-300x41.png 300w, https://cokebar.info/wp-content/uploads/2014/11/DNS-768x104.png 768w, https://cokebar.info/wp-content/uploads/2014/11/DNS-150x20.png 150w" sizes="(max-width: 397px) 100vw, 397px"></a></p>
<p>其中，5353是ChinaDNS的本地端口，需要和上面ChinaDNS设置保持一致。</p>
<p>然后切到HOSTS和解析文件选项卡，勾中“忽略解析文件”。</p>
<p><img class="alignnone wp-image-668 " src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/4-e1419669478169.png" alt="4" width="424" height="201" srcset="https://cokebar.info/wp-content/uploads/2014/11/4-e1419669478169.png 477w, https://cokebar.info/wp-content/uploads/2014/11/4-e1419669478169-300x142.png 300w, https://cokebar.info/wp-content/uploads/2014/11/4-e1419669478169-474x226.png 474w" sizes="(max-width: 424px) 100vw, 424px"></p>
<p>另外，请记住原来的设置（如下图），免得哪天想要撤掉科学上网的时候改不回去了，注意取消勾选后下面的“解析文件”里的值需要重新填写。</p>
<p><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/problem1.png"><img class="alignnone size-full wp-image-1533" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/problem1.png" alt="problem1" width="360" height="111" srcset="https://cokebar.info/wp-content/uploads/2015/01/problem1.png 360w, https://cokebar.info/wp-content/uploads/2015/01/problem1-300x93.png 300w, https://cokebar.info/wp-content/uploads/2015/01/problem1-150x46.png 150w" sizes="(max-width: 360px) 100vw, 360px"></a></p>
<p>到这里还没结束，因为目前的DNS设置不会对路由器自身访问WAN时候的DNS请求生效，因此还要下面的的额外步骤：</p>
<p>切换到WAN口设置→高级设置，取消“<label class="cbi-value-title" for="cbid.network.wan.peerdns">使用端局通告的DNS服务器”的勾选，并在“<label class="cbi-value-title" for="cbid.network.wan.dns">使用自定义的DNS服务器”中填入127.0.0.1，如下图所示：</label></label></p>
<p><a href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/WAN_DNS.png"><img class="alignnone size-full wp-image-1801" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/WAN_DNS.png" sizes="(max-width: 468px) 100vw, 468px" srcset="https://cokebar.info/wp-content/uploads/2014/11/WAN_DNS.png 468w, https://cokebar.info/wp-content/uploads/2014/11/WAN_DNS-300x54.png 300w, https://cokebar.info/wp-content/uploads/2014/11/WAN_DNS-150x27.png 150w" alt="" width="468" height="85"></a></p>
<p>同时也请记住你修改过这里的配置，那天你想撤掉科学上网的时候记得把这个该回去。</p>
<p>&nbsp;</p>
<p>至此，DNS的基本功能的配置结束，应该可以正常科学上网了，此时可以尝试一下是否成功。然而此时区分国内国外域名全靠ChinaDNS，但是ChinaDNS的判断并不一定是准确的，需要优化。“DNS转发链的优化配置”部分会加入GFWList和China-List，来优化国内国外域名的解析。</p>
</div></div><div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>III. DNS转发链的优化配置</div><div class="su-spoiler-content su-clearfix">
<p><strong>1. 修改dnsmasq配置：</strong></p>
<p>新建目录&nbsp;<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f07608713a770879239" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">.</span><span class="crayon-v">d</span></span></span>&nbsp;，然后执行：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f07608713e710198114" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">uci get dhcp.@dnsmasq[0].confdir</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f07608713e710198114-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f07608713e710198114-1"><span class="crayon-e">uci </span><span class="crayon-r">get</span><span class="crayon-h"> </span><span class="crayon-v">dhcp</span><span class="crayon-sy">.</span><span class="crayon-sy">@</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-e">.confdir</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
如果返回值为<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f07608713f993846319" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">uci</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Entry </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">found</span></span></span>&nbsp;或者其他非&nbsp;<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f076087140041181796" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">.</span><span class="crayon-v">d</span></span></span>&nbsp;的值，则执行：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087141394666359" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">uci add_list dhcp.@dnsmasq[0].confdir=/etc/dnsmasq.d
uci commit dhcp</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087141394666359-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087141394666359-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087141394666359-1"><span class="crayon-e">uci </span><span class="crayon-e">add_list </span><span class="crayon-v">dhcp</span><span class="crayon-sy">.</span><span class="crayon-sy">@</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-e">.confdir</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-e">.d</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087141394666359-2"><span class="crayon-e">uci </span><span class="crayon-e">commit </span><span class="crayon-v">dhcp</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
而最新的LEDE里如果需要增加缓存条数，对应需要执行：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087143263214385" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">uci get dhcp.@dnsmasq[0].cachesize</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087143263214385-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087143263214385-1"><span class="crayon-e">uci </span><span class="crayon-r">get</span><span class="crayon-h"> </span><span class="crayon-v">dhcp</span><span class="crayon-sy">.</span><span class="crayon-sy">@</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-e">.cachesize</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
如果返回值为<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f076087144439506955" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">uci</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Entry </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">found</span></span></span>&nbsp;，则执行（缓存条数酌情设置）：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087145258005401" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">uci add_list dhcp.@dnsmasq[0].cachesize=10000
uci commit dhcp</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087145258005401-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087145258005401-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087145258005401-1"><span class="crayon-e">uci </span><span class="crayon-e">add_list </span><span class="crayon-v">dhcp</span><span class="crayon-sy">.</span><span class="crayon-sy">@</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-e">.cachesize</span><span class="crayon-o">=</span><span class="crayon-cn">10000</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087145258005401-2"><span class="crayon-e">uci </span><span class="crayon-e">commit </span><span class="crayon-v">dhcp</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
如果返回值是一个数字，说明设置过该选项，但如果感觉小了，运行如下命令修改该值：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087146063659879" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">uci set dhcp.@dnsmasq[0].cachesize=10000
uci commit dhcp</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087146063659879-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087146063659879-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087146063659879-1"><span class="crayon-e">uci </span><span class="crayon-e">set </span><span class="crayon-v">dhcp</span><span class="crayon-sy">.</span><span class="crayon-sy">@</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-e">.cachesize</span><span class="crayon-o">=</span><span class="crayon-cn">10000</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087146063659879-2"><span class="crayon-e">uci </span><span class="crayon-e">commit </span><span class="crayon-v">dhcp</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
然后为了正常使用下面用到的脚本，需要安装可信根证书以及curl：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087148070222017" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">opkg install coreutils-base64 ca-certificates ca-bundle curl</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087148070222017-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087148070222017-1"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">coreutils</span><span class="crayon-o">-</span><span class="crayon-e">base64 </span><span class="crayon-v">ca</span><span class="crayon-o">-</span><span class="crayon-e">certificates </span><span class="crayon-v">ca</span><span class="crayon-o">-</span><span class="crayon-e">bundle </span><span class="crayon-v">curl</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
<strong>2. 添加gfwlist和China-List配置文件</strong>（此部分配置和“三、按域名指定是否走代理”部分的配置二选一）：</p>
<p>（感觉下面的步骤有难度的，或者单纯不想用自动脚本生成的，可以使用现成的配置文件来代替下面的操作，但需要进行批量替换，将China-List中的DNS改成你ISP的DNS，将GfwList中的DNS改成127.0.0.1#5311。下载地址：<a href="https://cokebar.github.io/gfwlist2dnsmasq/dnsmasq_gfwlist.conf" target="_blank" rel="noopener noreferrer">dnsmasq_gfwlist.conf</a>，<a href="https://raw.githubusercontent.com/felixonmars/dnsmasq-china-list/master/accelerated-domains.china.conf" target="_blank" rel="noopener noreferrer">accelerated-domains.china.conf</a>）</p>
<p>下面的步骤会使用我编写的脚本来自动生成配置文件，脚本放在github维护，可能随时更新，可到<a href="https://github.com/cokebar/gfwlist2dnsmasq" target="_blank" rel="noopener noreferrer">gfwlist2dnsmasq</a>, <a href="https://github.com/cokebar/openwrt-scripts" target="_blank" rel="noopener noreferrer">openwrt-scripts</a>查看最近更新的动态。</p>
<p>下载自动生成规则文件的脚本：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f07608714a394516730" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">cd ~
# China-List
curl -L -o generate_dnsmasq_chinalist.sh https://github.com/cokebar/openwrt-scripts/raw/master/generate_dnsmasq_chinalist.sh
chmod +x generate_dnsmasq_chinalist.sh
# GfwList
curl -L -o gfwlist2dnsmasq.sh https://github.com/cokebar/gfwlist2dnsmasq/raw/master/gfwlist2dnsmasq.sh
chmod +x gfwlist2dnsmasq.sh</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f07608714a394516730-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608714a394516730-2">2</div><div class="crayon-num" data-line="crayon-5b9f07608714a394516730-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608714a394516730-4">4</div><div class="crayon-num" data-line="crayon-5b9f07608714a394516730-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608714a394516730-6">6</div><div class="crayon-num" data-line="crayon-5b9f07608714a394516730-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f07608714a394516730-1"><span class="crayon-r">cd</span><span class="crayon-h"> </span><span class="crayon-o">~</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608714a394516730-2"><span class="crayon-c"># China-List</span></div><div class="crayon-line" id="crayon-5b9f07608714a394516730-3"><span class="crayon-v">curl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">L</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">o</span><span class="crayon-h"> </span><span class="crayon-v">generate_dnsmasq_chinalist</span><span class="crayon-e">.sh</span><span class="crayon-h"> </span><span class="crayon-v">https</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-o">/</span><span class="crayon-v">github</span><span class="crayon-e">.com</span><span class="crayon-o">/</span><span class="crayon-v">cokebar</span><span class="crayon-o">/</span><span class="crayon-v">openwrt</span><span class="crayon-o">-</span><span class="crayon-v">scripts</span><span class="crayon-o">/</span><span class="crayon-v">raw</span><span class="crayon-o">/</span><span class="crayon-v">master</span><span class="crayon-o">/</span><span class="crayon-v">generate_dnsmasq_chinalist</span><span class="crayon-e">.sh</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608714a394516730-4"><span class="crayon-r">chmod</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-v">generate_dnsmasq_chinalist</span><span class="crayon-e">.sh</span></div><div class="crayon-line" id="crayon-5b9f07608714a394516730-5"><span class="crayon-c"># GfwList</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608714a394516730-6"><span class="crayon-v">curl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">L</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">o</span><span class="crayon-h"> </span><span class="crayon-v">gfwlist2dnsmasq</span><span class="crayon-e">.sh</span><span class="crayon-h"> </span><span class="crayon-v">https</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-o">/</span><span class="crayon-v">github</span><span class="crayon-e">.com</span><span class="crayon-o">/</span><span class="crayon-v">cokebar</span><span class="crayon-o">/</span><span class="crayon-v">gfwlist2dnsmasq</span><span class="crayon-o">/</span><span class="crayon-v">raw</span><span class="crayon-o">/</span><span class="crayon-v">master</span><span class="crayon-o">/</span><span class="crayon-v">gfwlist2dnsmasq</span><span class="crayon-e">.sh</span></div><div class="crayon-line" id="crayon-5b9f07608714a394516730-7"><span class="crayon-r">chmod</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-v">gfwlist2dnsmasq</span><span class="crayon-e">.sh</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
逐条执行，并重启dnsmasq（记得下面命令中114DNS换成ISP的DNS）：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f07608714c500898744" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;"># China-list
sh generate_dnsmasq_chinalist.sh -d 114.114.114.114 -p 53 -o /etc/dnsmasq.d/accelerated-domains.china.conf
# GfwList
sh gfwlist2dnsmasq.sh -d 127.0.0.1 -p 5311 -o /etc/dnsmasq.d/dnsmasq_gfwlist.conf
# Restart dnsmasq
/etc/init.d/dnsmasq restart</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f07608714c500898744-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608714c500898744-2">2</div><div class="crayon-num" data-line="crayon-5b9f07608714c500898744-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608714c500898744-4">4</div><div class="crayon-num" data-line="crayon-5b9f07608714c500898744-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608714c500898744-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f07608714c500898744-1"><span class="crayon-c"># China-list</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608714c500898744-2"><span class="crayon-r">sh</span><span class="crayon-h"> </span><span class="crayon-v">generate_dnsmasq_chinalist</span><span class="crayon-e">.sh</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-cn">114.114.114.114</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-cn">53</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">o</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-e">.d</span><span class="crayon-o">/</span><span class="crayon-v">accelerated</span><span class="crayon-o">-</span><span class="crayon-v">domains</span><span class="crayon-e">.china</span><span class="crayon-e">.conf</span></div><div class="crayon-line" id="crayon-5b9f07608714c500898744-3"><span class="crayon-c"># GfwList</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608714c500898744-4"><span class="crayon-r">sh</span><span class="crayon-h"> </span><span class="crayon-v">gfwlist2dnsmasq</span><span class="crayon-e">.sh</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-cn">5311</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">o</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-e">.d</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq_gfwlist</span><span class="crayon-e">.conf</span></div><div class="crayon-line" id="crayon-5b9f07608714c500898744-5"><span class="crayon-c"># Restart dnsmasq</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608714c500898744-6"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">init</span><span class="crayon-e">.d</span><span class="crayon-o">/</span><span class="crayon-e">dnsmasq </span><span class="crayon-v">restart</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
完成后可自行查看<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f07608714e277682298" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">.</span><span class="crayon-v">d</span><span class="crayon-o">/</span><span class="crayon-v">accelerated</span><span class="crayon-o">-</span><span class="crayon-v">domains</span><span class="crayon-sy">.</span><span class="crayon-v">china</span><span class="crayon-sy">.</span><span class="crayon-v">conf</span></span></span>&nbsp;和文件，如有不需要的域名，注释掉或者删除即可（eg: 我这里港服PS Store直连很慢，于是在列表中搜索playstation关键字，将对应行用#注释掉。如果直连不慢建议不要更改）</p>
<p>PS：路由性能不好的，慎用China-List。</p>
</div></div>
<h5>三、按域名指定是否走代理（可选）</h5>
<hr>
<p>这一部分的配置用于替代 “<a href="https://cokebar.info/archives/664#mao1">二.III.2. 添加gfwlist和China-List配置文件</a>”中的步骤。请在完成“<a href="https://cokebar.info/archives/664#mao1">二.III.2. 添加gfwlist和China-List配置文件</a>”前面的配置后进行这一部分的配置。</p>
<p>下面的步骤会使用我编写的脚本来自动生成配置文件，脚本放在github维护，可能随时更新，可到<a href="https://github.com/cokebar/gfwlist2dnsmasq" target="_blank" rel="noopener noreferrer">gfwlist2dnsmasq</a>, <a href="https://github.com/cokebar/openwrt-scripts" target="_blank" rel="noopener noreferrer">openwrt-scripts</a>查看最近更新的动态。</p>
<p>先使用dnsmasq-full替换掉原有的dnsmasq：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087151135508022" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">opkg remove dnsmasq &amp;&amp; opkg install dnsmasq-full</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087151135508022-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087151135508022-1"><span class="crayon-e">opkg </span><span class="crayon-e">remove </span><span class="crayon-v">dnsmasq</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">dnsmasq</span><span class="crayon-o">-</span><span class="crayon-v">full</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
</p><div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>I. China-List强制直连 自定义域名强制直连</div><div class="su-spoiler-content su-clearfix">
<p>下载并执行自动生成规则文件的脚本，并重启dnsmasq（记得命令中114DNS换成ISP的DNS）：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087154276737298" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">cd ~
curl -L -o generate_dnsmasq_chinalist.sh https://github.com/cokebar/openwrt-scripts/raw/master/generate_dnsmasq_chinalist.sh
chmod +x generate_dnsmasq_chinalist.sh
sh generate_dnsmasq_chinalist.sh -d 114.114.114.114 -p 53 -s ss_spec_dst_bp -o /etc/dnsmasq.d/accelerated-domains.china.conf</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087154276737298-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087154276737298-2">2</div><div class="crayon-num" data-line="crayon-5b9f076087154276737298-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087154276737298-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087154276737298-1"><span class="crayon-r">cd</span><span class="crayon-h"> </span><span class="crayon-o">~</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087154276737298-2"><span class="crayon-v">curl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">L</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">o</span><span class="crayon-h"> </span><span class="crayon-v">generate_dnsmasq_chinalist</span><span class="crayon-e">.sh</span><span class="crayon-h"> </span><span class="crayon-v">https</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-o">/</span><span class="crayon-v">github</span><span class="crayon-e">.com</span><span class="crayon-o">/</span><span class="crayon-v">cokebar</span><span class="crayon-o">/</span><span class="crayon-v">openwrt</span><span class="crayon-o">-</span><span class="crayon-v">scripts</span><span class="crayon-o">/</span><span class="crayon-v">raw</span><span class="crayon-o">/</span><span class="crayon-v">master</span><span class="crayon-o">/</span><span class="crayon-v">generate_dnsmasq_chinalist</span><span class="crayon-e">.sh</span></div><div class="crayon-line" id="crayon-5b9f076087154276737298-3"><span class="crayon-r">chmod</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-v">generate_dnsmasq_chinalist</span><span class="crayon-e">.sh</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087154276737298-4"><span class="crayon-r">sh</span><span class="crayon-h"> </span><span class="crayon-v">generate_dnsmasq_chinalist</span><span class="crayon-e">.sh</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-cn">114.114.114.114</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-cn">53</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-v">ss_spec_dst_bp</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">o</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-e">.d</span><span class="crayon-o">/</span><span class="crayon-v">accelerated</span><span class="crayon-o">-</span><span class="crayon-v">domains</span><span class="crayon-e">.china</span><span class="crayon-e">.conf</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
完成后可自行查看<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f076087161539601881" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">.</span><span class="crayon-v">d</span><span class="crayon-o">/</span><span class="crayon-v">accelerated</span><span class="crayon-o">-</span><span class="crayon-v">domains</span><span class="crayon-sy">.</span><span class="crayon-v">china</span><span class="crayon-sy">.</span><span class="crayon-v">conf</span></span></span>&nbsp;和文件，如有不需要的域名，注释掉或者删除即可（eg: 我这里港服PS Store直连很慢，于是在列表中搜索playstation关键字，将对应行用#注释掉。如果直连不慢建议不要更改）</p>
<p>接着可以继续添加自己的需要强制不走代理的域名，在<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f076087163617444580" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">.</span><span class="crayon-v">d</span></span></span>&nbsp;目录下新建<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f076087164532086901" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">custom_bypass</span><span class="crayon-sy">.</span><span class="crayon-v">conf</span></span></span>&nbsp;，按照下列格式添加（把114替换成ISP的DNS）：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087166521972577" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">server=/example.com/114.114.114.114
ipset=/example.com/ss_spec_dst_bp</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087166521972577-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087166521972577-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087166521972577-1"><span class="crayon-v">server</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-o">/</span><span class="crayon-cn">114.114.114.114</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087166521972577-2"><span class="crayon-v">ipset</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-o">/</span><span class="crayon-v">ss_spec_dst_bp</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
一个站点很可能存在CDN，此时也要将对应CDN域名加进来，并且站点页面也可能加载了多个域名的资源，这些域名也要酌情加入进来，可以使用浏览器的开发者工具查看这些域名。</p>
<p>最后不要忘记重启dnsmasq：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087167275394024" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">/etc/init.d/dnsmasq restart</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087167275394024-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087167275394024-1"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">init</span><span class="crayon-e">.d</span><span class="crayon-o">/</span><span class="crayon-e">dnsmasq </span><span class="crayon-v">restart</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
PS：路由性能不好的，慎用这一部分的配置。</p>
</div></div><div class="su-spoiler su-spoiler-style-fancy su-spoiler-icon-plus"><div class="su-spoiler-title"><span class="su-spoiler-icon"></span>II. GFWList强制走代理 自定义域名强制走代理</div><div class="su-spoiler-content su-clearfix">
<p>下载自动生成规则文件的脚本并执行：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f076087168575923389" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">cd ~
curl -L -o gfwlist2dnsmasq.sh https://github.com/cokebar/gfwlist2dnsmasq/raw/master/gfwlist2dnsmasq.sh
chmod +x gfwlist2dnsmasq.sh
sh gfwlist2dnsmasq.sh -d 127.0.0.1 -p 5311 -s ss_spec_dst_fw -o /etc/dnsmasq.d/dnsmasq_gfwlist.conf</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f076087168575923389-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087168575923389-2">2</div><div class="crayon-num" data-line="crayon-5b9f076087168575923389-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f076087168575923389-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f076087168575923389-1"><span class="crayon-r">cd</span><span class="crayon-h"> </span><span class="crayon-o">~</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087168575923389-2"><span class="crayon-v">curl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">L</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">o</span><span class="crayon-h"> </span><span class="crayon-v">gfwlist2dnsmasq</span><span class="crayon-e">.sh</span><span class="crayon-h"> </span><span class="crayon-v">https</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-o">/</span><span class="crayon-v">github</span><span class="crayon-e">.com</span><span class="crayon-o">/</span><span class="crayon-v">cokebar</span><span class="crayon-o">/</span><span class="crayon-v">gfwlist2dnsmasq</span><span class="crayon-o">/</span><span class="crayon-v">raw</span><span class="crayon-o">/</span><span class="crayon-v">master</span><span class="crayon-o">/</span><span class="crayon-v">gfwlist2dnsmasq</span><span class="crayon-e">.sh</span></div><div class="crayon-line" id="crayon-5b9f076087168575923389-3"><span class="crayon-r">chmod</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-v">gfwlist2dnsmasq</span><span class="crayon-e">.sh</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f076087168575923389-4"><span class="crayon-r">sh</span><span class="crayon-h"> </span><span class="crayon-v">gfwlist2dnsmasq</span><span class="crayon-e">.sh</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-cn">127.0.0.1</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-cn">5311</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-v">ss_spec_dst_fw</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">o</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-e">.d</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq_gfwlist</span><span class="crayon-e">.conf</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
接着可以增加自己的强制走代理的域名，在<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f07608716a529058614" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">dnsmasq</span><span class="crayon-sy">.</span><span class="crayon-v">d</span></span></span>&nbsp;目录下新建<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

			<span id="crayon-5b9f07608716b685845271" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important;"><span class="crayon-pre crayon-code" style="font-size: 14px !important; line-height: 16px !important;font-size: 14px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span class="crayon-v">custom_forward</span><span class="crayon-sy">.</span><span class="crayon-v">conf</span></span></span>&nbsp;，按照下列格式添加（5311对应dns-forwarder端口）：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f07608716c166808308" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">server=/example.com/127.0.0.1#5311
ipset=/example.com/ss_spec_dst_fw</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f07608716c166808308-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5b9f07608716c166808308-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f07608716c166808308-1"><span class="crayon-v">server</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-o">/</span><span class="crayon-cn">127.0.0.1</span><span class="crayon-p">#5311</span></div><div class="crayon-line crayon-striped-line" id="crayon-5b9f07608716c166808308-2"><span class="crayon-v">ipset</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">example</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-o">/</span><span class="crayon-v">ss_spec_dst_fw</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
一个站点很可能存在CDN，此时也要将对应CDN域名加进来，并且站点页面也可能加载了多个域名的资源，这些域名也要酌情加入进来，可以使用浏览器的开发者工具查看这些域名。</p>
<p>最后不要忘记重启dnsmasq：</p><link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/github.css">
<link rel="stylesheet" type="text/css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/consolas.css">

		<div id="crayon-5b9f07608716d492874400" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 14px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 14px !important;height: 21px !important; line-height: 21px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Shell</span></div></div>
			<div class="crayon-info" style="min-height: 19.6px !important; line-height: 19.6px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 14px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">/etc/init.d/dnsmasq restart</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 14px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5b9f07608716d492874400-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 14px !important; line-height: 16px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5b9f07608716d492874400-1"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">init</span><span class="crayon-e">.d</span><span class="crayon-o">/</span><span class="crayon-e">dnsmasq </span><span class="crayon-v">restart</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div><p>
</p></div></div>
<h5>四、其他</h5>
<hr>
<p>一些<strong>强烈推荐</strong>的额外设置项（涉及到更新、维护）可以参考：<a href="https://cokebar.info/archives/850" target="_blank" rel="noopener noreferrer">《Shadowsocks for OpenWRT / LEDE 拾遗》</a></p>
<p><strong>需要自己搭建服务器的，可以参考：</strong><a href="https://cokebar.info/archives/767" target="_blank" rel="noopener">shadowsocks – libev 服务端的部署</a></p>
<p><strong>推荐的VPS商家见：</strong><a href="https://cokebar.info/about" target="_blank" rel="noopener">https://cokebar.info/about</a></p>
<p><a href="https://cokebar.info/archives/978" target="_blank" rel="noopener">本博客有关 shadowsocks 文章合集目录</a></p>
<h5>五、写在最后</h5>
<hr>
<p>本人作为一名普通使用者，水平有限，且文章也缺乏校审，肯定有错误存在，也有很多能改进的地方，如有意见或建议，请留言指出，万分感谢！ 如果使用时遇到问题也欢迎留言，本人如果有空都会回复，不过请一定要将出错信息贴出来，有些错误信息需要到系统日志中查看。</p>
<div class="crp_related "><hr><h3 class="widget-title"><strong>相关文章：</strong></h3><ul><blockquote><li style="margin-bottom: 15px"><em><a href="https://cokebar.info/archives/978" target="_blank"><span class="crp_title">本博客有关 shadowsocks 文章合集目录</span></a></em></li><li style="margin-bottom: 15px"><em><a href="https://cokebar.info/archives/962" target="_blank"><span class="crp_title">Shadowsocks + GfwList 实现 OpenWRT / LEDE 路由器自动翻墙</span></a></em></li><li style="margin-bottom: 15px"><em><a href="https://cokebar.info/archives/1890" target="_blank"><span class="crp_title">KMS 自动激活利器 – vlmcsd for OpenWrt / LEDE</span></a></em></li><li style="margin-bottom: 15px"><em><a href="https://cokebar.info/archives/948" target="_blank"><span class="crp_title">Shadowsocks + Redsocks 实现 OpenWRT 路由器自动翻墙 (停止更新)</span></a></em></li><li style="margin-bottom: 15px"><em><a href="https://cokebar.info/archives/850" target="_blank"><span class="crp_title">Shadowsocks for OpenWRT / LEDE 拾遗</span></a></em></li></blockquote></ul><div class="crp_clear"></div></div>							<div class="tags">
								<a href="https://cokebar.info/tags/chinadns" rel="tag">chinadns</a>，<a href="https://cokebar.info/tags/chnroute" rel="tag">chnroute</a>，<a href="https://cokebar.info/tags/dnsmasq" rel="tag">dnsmasq</a>，<a href="https://cokebar.info/tags/lede" rel="tag">LEDE</a>，<a href="https://cokebar.info/tags/openwrt" rel="tag">openwrt</a>，<a href="https://cokebar.info/tags/shadowsocks" rel="tag">shadowsocks</a>，<a href="https://cokebar.info/tags/%e7%a7%91%e5%ad%a6%e4%b8%8a%e7%bd%91" rel="tag">科学上网</a>，<a href="https://cokebar.info/tags/%e7%bf%bb%e5%a2%99" rel="tag">翻墙</a>，<a href="https://cokebar.info/tags/%e8%b7%af%e7%94%b1%e5%99%a8" rel="tag">路由器</a>							</div>
							  			</div>

  						<ul class="default-wp-page clearfix">
				<li class="previous"><a href="https://cokebar.info/archives/962" rel="prev"><span class="meta-nav">←</span> Shadowsocks + GfwList 实现 OpenWRT / LEDE 路由器自动翻墙</a></li>
				<li class="next"><a href="https://cokebar.info/archives/978" rel="next">本博客有关 shadowsocks 文章合集目录 <span class="meta-nav">→</span></a></li>
			</ul>
		
<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			1,918 条评论		</h2>

		<ol class="commentlist">
				<li class="pingback even thread-even depth-1" id="comment-3941">
		<p>引用: <a href="https://zorz.cc/post/lede-shadowsocks.html" rel="external nofollow" class="url">ar9331路由器LEDE系统仅shadowsocks - outs - 宅…orz</a> </p>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3942">
		<article id="comment-3942" class="comment">
			<footer class="comment-meta comment-author vcard"><div>
				<img alt="" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/fd8c81c5c5e8074ac17e5c2acafd794a" srcset="https://cokebar.info/gravatar_mirror/avatar/fd8c81c5c5e8074ac17e5c2acafd794a?s=88&amp;r=g 2x" class="avatar avatar-44 photo" height="44" width="44"><cite class="fn">小姐姐 </cite>				<span class="comment-meta" <a="" href="https://cokebar.info/archives/664/comment-page-68#comment-3942"><time pubdate="" datetime="2018-08-12T14:57:12+00:00">2018-08-12 于 14:57</time>				<a rel="nofollow" class="comment-reply-link" href="https://cokebar.info/archives/664#comment-3942" onclick="return addComment.moveForm( &quot;comment-3942&quot;, &quot;3942&quot;, &quot;respond&quot;, &quot;664&quot; )" aria-label="回复给小姐姐">回复</a>				</span>
			</div>


			<!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>飞羽如果有空可以更新一下！最近a大也在更新了，如果是其他原因。也可以暗示一下我们都理解</p>
							</section><!-- .comment-content -->

		</footer></article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-3958">
		<article id="comment-3958" class="comment">
			<footer class="comment-meta comment-author vcard"><div>
				<img alt="" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/fac5d1c0fe821e18675ab162f7107596" srcset="https://cokebar.info/gravatar_mirror/avatar/fac5d1c0fe821e18675ab162f7107596?s=88&amp;r=g 2x" class="avatar avatar-44 photo" height="44" width="44"><cite class="fn">JIANG </cite>				<span class="comment-meta" <a="" href="https://cokebar.info/archives/664/comment-page-68#comment-3958"><time pubdate="" datetime="2018-08-24T19:18:09+00:00">2018-08-24 于 19:18</time>				<a rel="nofollow" class="comment-reply-link" href="https://cokebar.info/archives/664#comment-3958" onclick="return addComment.moveForm( &quot;comment-3958&quot;, &quot;3958&quot;, &quot;respond&quot;, &quot;664&quot; )" aria-label="回复给JIANG">回复</a>				</span>
			</div>


			<!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>服务器管理中添加SS服务器只能填写IP地址，不能填写域名，大大有什么好办法不</p>
							</section><!-- .comment-content -->

		</footer></article><!-- #comment-## -->
	<ol class="children">
	<li class="comment byuser comment-author-cokebar bypostauthor odd alt depth-2" id="li-comment-3966">
		<article id="comment-3966" class="comment">
			<footer class="comment-meta comment-author vcard"><div>
				<img alt="" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/10a50e050745c69257791c3df11f9872" srcset="https://cokebar.info/gravatar_mirror/avatar/10a50e050745c69257791c3df11f9872?s=88&amp;r=g 2x" class="avatar avatar-44 photo" height="44" width="44"><cite class="fn"><a href="https://cokebar.info/" rel="external nofollow" class="url">cokebar</a> <span> 文章作者</span></cite>				<span class="comment-meta" <a="" href="https://cokebar.info/archives/664/comment-page-68#comment-3966"><time pubdate="" datetime="2018-09-08T12:34:17+00:00">2018-09-08 于 12:34</time>				<a rel="nofollow" class="comment-reply-link" href="https://cokebar.info/archives/664#comment-3966" onclick="return addComment.moveForm( &quot;comment-3966&quot;, &quot;3966&quot;, &quot;respond&quot;, &quot;664&quot; )" aria-label="回复给cokebar">回复</a>				</span>
			</div>


			<!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>如果是那种IP经常变的，目前没有办法，理由如下：<br>
1. 虽然可以使用工具先解析域名再执行netfilter的设置（以前aa65535的版本曾经这么干过），然而在开机阶段很有问题，路由器刚开机，luci-app-shadowsocks的开机脚本执行到解析域名的时候，wan口网络、DNS服务都可能没初始化完毕，会造成域名解析失败，从而导致开机自启动失败；而且有的人的DNS防污染方案依赖于shadowsocks，那shadowsocks没启动前如何进行DNS解析？<br>
2. 这种服务器往往是通过DDNS来指向IP，IP变动频繁；对于电脑的ss客户端可能没问题，因为你每天会关机，第二天再开机会重新解析IP；而路由器一般是一开就不再关，连续运行很多天，那么如果路由器运行期间，服务器IP地址发生了变化，那就需要重启服务来解析新的IP，那么，谁来监控这个IP的变化？交给shadowsocks的init脚本肯定是不合适的，所以对于shadowsocks的init脚本还是要读入IP地址，而你可能需要自行编写一个脚本，每隔一段时间监测一下IP是否改变，如果改变，就将新的IP写入shadowsocks配置文件，并重启shadowsocks</p>
							</section><!-- .comment-content -->

		</footer></article><!-- #comment-## -->
	</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3967">
		<article id="comment-3967" class="comment">
			<footer class="comment-meta comment-author vcard"><div>
				<img alt="" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/e20ebe4dc3226382095056a0328523c2" srcset="https://cokebar.info/gravatar_mirror/avatar/e20ebe4dc3226382095056a0328523c2?s=88&amp;r=g 2x" class="avatar avatar-44 photo" height="44" width="44"><cite class="fn">五名独慧 </cite>				<span class="comment-meta" <a="" href="https://cokebar.info/archives/664/comment-page-68#comment-3967"><time pubdate="" datetime="2018-09-08T21:03:17+00:00">2018-09-08 于 21:03</time>				<a rel="nofollow" class="comment-reply-link" href="https://cokebar.info/archives/664#comment-3967" onclick="return addComment.moveForm( &quot;comment-3967&quot;, &quot;3967&quot;, &quot;respond&quot;, &quot;664&quot; )" aria-label="回复给五名独慧">回复</a>				</span>
			</div>


			<!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>你好，路由器我设置好了，电脑可以科学上网，但是手机不可以。请问怎么解决，谢谢！</p>
							</section><!-- .comment-content -->

		</footer></article><!-- #comment-## -->
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-3968">
		<article id="comment-3968" class="comment">
			<footer class="comment-meta comment-author vcard"><div>
				<img alt="" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/714ed44f95fef021942f489471dda48c" srcset="https://cokebar.info/gravatar_mirror/avatar/714ed44f95fef021942f489471dda48c?s=88&amp;r=g 2x" class="avatar avatar-44 photo" height="44" width="44"><cite class="fn">zxx </cite>				<span class="comment-meta" <a="" href="https://cokebar.info/archives/664/comment-page-68#comment-3968"><time pubdate="" datetime="2018-09-09T11:38:26+00:00">2018-09-09 于 11:38</time>				<a rel="nofollow" class="comment-reply-link" href="https://cokebar.info/archives/664#comment-3968" onclick="return addComment.moveForm( &quot;comment-3968&quot;, &quot;3968&quot;, &quot;respond&quot;, &quot;664&quot; )" aria-label="回复给zxx">回复</a>				</span>
			</div>


			<!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>hi，羽哥更新了。我想问一下Chinadns上面的监听地址写什么了，写127.0.0.1吗？</p>
							</section><!-- .comment-content -->

		</footer></article><!-- #comment-## -->
	<ol class="children">
	<li class="comment byuser comment-author-cokebar bypostauthor even depth-2" id="li-comment-3969">
		<article id="comment-3969" class="comment">
			<footer class="comment-meta comment-author vcard"><div>
				<img alt="" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/10a50e050745c69257791c3df11f9872" srcset="https://cokebar.info/gravatar_mirror/avatar/10a50e050745c69257791c3df11f9872?s=88&amp;r=g 2x" class="avatar avatar-44 photo" height="44" width="44"><cite class="fn"><a href="https://cokebar.info/" rel="external nofollow" class="url">cokebar</a> <span> 文章作者</span></cite>				<span class="comment-meta" <a="" href="https://cokebar.info/archives/664/comment-page-68#comment-3969"><time pubdate="" datetime="2018-09-09T14:12:40+00:00">2018-09-09 于 14:12</time>				<a rel="nofollow" class="comment-reply-link" href="https://cokebar.info/archives/664#comment-3969" onclick="return addComment.moveForm( &quot;comment-3969&quot;, &quot;3969&quot;, &quot;respond&quot;, &quot;664&quot; )" aria-label="回复给cokebar">回复</a>				</span>
			</div>


			<!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>是的，127.0.0.1即可。如果想要LAN内其他设备也能访问ChinaDNS的端口，可以填0.0.0.0</p>
							</section><!-- .comment-content -->

		</footer></article><!-- #comment-## -->
	</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3970">
		<article id="comment-3970" class="comment">
			<footer class="comment-meta comment-author vcard"><div>
				<img alt="" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/cf151045ea2139ac1ebd3afb3bd9cd3c" srcset="https://cokebar.info/gravatar_mirror/avatar/cf151045ea2139ac1ebd3afb3bd9cd3c?s=88&amp;r=g 2x" class="avatar avatar-44 photo" height="44" width="44"><cite class="fn">ke xiao </cite>				<span class="comment-meta" <a="" href="https://cokebar.info/archives/664/comment-page-68#comment-3970"><time pubdate="" datetime="2018-09-10T22:28:26+00:00">2018-09-10 于 22:28</time>				<a rel="nofollow" class="comment-reply-link" href="https://cokebar.info/archives/664#comment-3970" onclick="return addComment.moveForm( &quot;comment-3970&quot;, &quot;3970&quot;, &quot;respond&quot;, &quot;664&quot; )" aria-label="回复给ke xiao">回复</a>				</span>
			</div>


			<!-- .comment-meta -->

			
			<section class="comment-content comment">
				<p>服务端内核和55都配置了tcp fast open，但是我路由器客户端一把tcp fast open的钩打上，透明代理就运行不起来，这是为什么呢</p>
							</section><!-- .comment-content -->

		</footer></article><!-- #comment-## -->
	</li><!-- #comment-## -->
		</ol><!-- .commentlist -->

		<div class="wp-pagenavi"><a class="prev page-numbers" href="https://cokebar.info/archives/664/comment-page-67#comments">上一页</a>
<a class="page-numbers" href="https://cokebar.info/archives/664/comment-page-1#comments">1</a>
<a class="page-numbers" href="https://cokebar.info/archives/664/comment-page-2#comments">2</a>
<span class="page-numbers dots">…</span>
<a class="page-numbers" href="https://cokebar.info/archives/664/comment-page-64#comments">64</a>
<a class="page-numbers" href="https://cokebar.info/archives/664/comment-page-65#comments">65</a>
<a class="page-numbers" href="https://cokebar.info/archives/664/comment-page-66#comments">66</a>
<a class="page-numbers" href="https://cokebar.info/archives/664/comment-page-67#comments">67</a>
<span aria-current="page" class="page-numbers current">68</span></div>
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">发表评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://cokebar.info/archives/664#respond" style="display:none;">取消回复</a></small></h3>			<form action="https://cokebar.info/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-notes"><span id="email-notes">电子邮件地址不会被公开。</span> 必填项已用<span class="required">*</span>标注</p><p class="comment-form-comment"><label for="comment">评论</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">姓名 <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required="required"></p>
<p class="comment-form-email"><label for="email">电子邮件 <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" required="required"></p>
<p class="comment-form-url"><label for="url">站点</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200"></p>
<p class="cptch_block"><span class="cptch_title">请输入验证码<span class="required"> *</span></span><script class="cptch_to_remove">
				(function( timeout ) {
					setTimeout(
						function() {
							var notice = document.getElementById("cptch_time_limit_notice_84");
							if ( notice )
								notice.style.display = "block";
						},
						timeout
					);
				})(120000);
			</script>
			<span id="cptch_time_limit_notice_84" class="cptch_time_limit_notice cptch_to_remove" style="display: block;">请输入正确的验证码</span><span class="cptch_wrap cptch_math_actions">
				<label class="cptch_label" for="cptch_input_84"><span class="cptch_span"><img class="cptch_img " src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABhQTFRFAAAA////e3t7Pj4+rKys0tLS6urq9vb2Geh1VgAAB5ZJREFUeNrt3U1T21YYxXEXQrO1ZRttDWWarZm0ky3p69ZkEbam/QI40Pbrd6amBMl6uVczPudK+rPXDPy4Pn50JF1NZiP/mQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPQKYD1p/7nvcNz12AE+sAJYAawAVgArgBXACkge4K9f3jf9HaeXV79+rj7usv7A0x9+u+/RKPz0Xc3f8f7qNt/VH5cvf6peB1f3x/lFj3YukH+q/Dd+v2s/9NMhweld3ruTod0fFQAfw/DKy+fk/mi/5jHPBv88+PvPQg/9ufj/3816CTC7KQNcBH+AbuLXTYIAy/KH+ffgQ89fHfpjfwuRx64rYJZvvn4A7vsLUB5twgFm2dcFsOsxwLzzKLd8Oei2z51gXlwC30Yc+fIVOOs1wKYA8KYDwHWvAV59lP/Ls/ADzzWfgOPX4u3ngM0ZcDLrOcDNpNtIs/g/NnY9B3jo+DWwiP/mTBMg63Yy8HLcru8Ay+JpXewEcewIEFwbLE4CsQBvew+Qd0zBrSYCBCtg2y0Fb2K/N5MFmHcahvNV7OSULEAxBd+Epnrst0a6ALNOw/DyeJdC5ACrgkDgaJ+JMlABsO3Sicw1Y5AEoJiC34QdtD+NPhkEwFOXSmAlykAFQN4lBdeKMkQFsIqvBJbHvyCgAyhVAkHXBrLIM4e0AR7jh+Gp5lRQBNChEtjElshJA5xHVwLPsXE9EID4SiCXZaAGILoSWIhOBVUA0cXoXDUHigC+xFYCugzUAEQXo/sMfDcYgH/WccPw8yXVj4MBiK0EhBkoAoisBL7EXkpOHqBYCbR2/ftvjbe74QAsoiqB50sJFwNaAZGVwFpxY4AUYBZVCSyFGagC2MSkYCbMQBVAVCUw1VwWlQKUKoFdwLnTxaAAoioBZQbKnh0uVgK7dixRBsoAIioBaQbKACIqgXnMFaTeAGThlYA0A2UAEZXASnNriBggD64EtBmo20FiFZqC2gzUAQRXAtoM1AEEVwIbaQbqAEIrgVybgcJdZAIrgVybgUKAwErgSZuBQoDASkCcgUKAedgwLM5AIUAWloLiDBQC5GHDsDgDlXuJBVUCC9XtcQaAoEpgruwDxQDTkBRUZ6ASIKgSUGegEiCoElBnoHRDxYBKQJ6BUoCAFNxn4IfdMAECKoGtOgOlAAGPT8kzUAqwbB2G982hMgOlAO13CegzULutbuu9UnPZLcIegNZKQJ+BWoDWSkCfgVqA1mJ0LbtF2APQdpeAIQPFe4uvm4tR/RyoBtg0D8OGDBQDtNwlsBI9LusDaH58aj8HnswGDNBcCSzE10QMAM2PTxnmQDnATdMw7MhANUDjjiqGOVAO0LiXgP5cWA/QVAk45kA5QN6wX/BctG2KFaCpEnhwZKAcoKESsGSgHKA+BXNLBsoBFrXDsCcD5QB/1xaj6ntjTAD1w7BlDjQA1F4f82SgHmBa994YTwbqAeoqAcu5sAOgrhKwnAs7AOpS0DMHOgCKw/CdOQMNANXFqGkOdABUD8OuDDQAVF8fc2Wg462zlZXAVrdvjB2gshJwZaADoLISmJgy0AFQlYK2DHQAVO0lYDoX9gBU3StlOhf2AFQ9OGDLQAtARSVgy0ALwGEl4MtAC8BhJeDLQAvAYSWwsWWgBeCgEsh9GegBKFcCuS8DPQDlSuDJl4EegPJeAsYM9ACUKwFjBnoAypXASrl3VhIAxRT8bMxAE0CxErg0ZqAJoLi94Kn6eWE/QFbxXvaLMQHkFQC3YwIov5Hal4EugIP30rsy0AUwPQDQ7COdDECWSga6AJYHAHfjAsjXiWSgC6A0DMsflPEDPJQzcGwA8xLAu7EBLEoAH8cGMJs0PDkwCoBVGhnoA9h0eh/zgAA6vIRwWABZCufCToDz8P32hwlQqAR8GWgEuEkiA40A0yQy0AiQpTAHOgGWca8hHR7Aq0rgZJQAr4bhs3ECbFPIQCfAPIUMdAIsEpgDrQB5ChnoBHhJwbOxAmwSyEArwGMCGWgFyBLIQCvAeQIZaAV4rgTORrsCniuB6/GugAfrhfEEADJ/BnoBUvgBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCYP/8CyYFd36BGLlYAAAAASUVORK5CYII=" alt="image"></span>
					<span class="cptch_span">&nbsp;×&nbsp;</span>
					<span class="cptch_span"><img class="cptch_img " src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABhQTFRFl5eXUlJS////AAAAt7e319fXJiYm7OzsqY1BfQAACG1JREFUeNrt3c9z2lYUxXHH8qTbOHTSLRIIbU0d023GxNNtxiTpNgmLblNI6b/fRZMm+sW790my54gva1+MPkhHT8cCn2Un/jgDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4TID0Ovz4LWJulU2vTY/l/0/pHnhUgMWpA6QAcAiwB5w0wF/sAWTAOACKt0+2x7bj49nFu13T4NtXl+2DHy/us+zL2SSkdHlxd//9Kd0DPS2Fi1ctW7J6dpdluyOTb540b/7vX584+3J5ZGue3dVeiXegr2uB/EXT7/twX4Qnn9bnfv7xB748bdualmd3D/RyMZQnDdtvG/1c3X1+qrypb5r26+Vt6/7oHejnajCv/1LrsTYvC/xSGPav1a1zh1zFbL/rcngaH7al0ZdNb2pt//ozkEregT76gPeVX/nSPnr44Z1q3G/yymGy2oV2SO9ADwBF5SC4cowG36mF97kX0S8mvhFKo9cbWRJ6p4ryc3/ymNoGegCo7AIrx+Tm29BN24+Un/t5+DndAz10goeyuuOwm32bOW/7iY33BLOJOiN1A8jLAOf2yX3wsFl4bRexb0aXVjiJ3e32oSOgHDArbyKtsocBOASvAQP763Pb9iy9AMsHApjGnnrWwT116t2e6WMAZLGngSRIJgKQREZvEjxoRAA2kaeBSXBABKB87vnVPLcNnqxEAKZxl0NF+GWKABRxVwPz8HlTBKCyAreuv9LwykkFYB2Vgl+j43YEAIuoi9BNeN2gAlBOwRvXMuBqDAB5VApuw9cOKgDlFFy51J6PAqC8GL71HDf3owDYR1QCC8PuIgOQRlQCG8PVswzAPKISSAznTBmAbOtOwWJrOFx0APyVwNyybtYB2LhTMLW8Rh2A1L0YPliunXUA/JWAJQOFADL3YnjScFuEMoC3EshNPygE4C1Gp6aXKATgrQRMGagE4K0E1iYoIQBvJTAxHSpCAM5K4GuRnI0IIHGloC0DpQBmrsXwwhYVSgC+SmBju2ZQAshdlUBiWy4oAfgqAWNvIAXgKUbnxhcoBeApRlNjdygFkDpuU94bexMpAE8xmrgumUQAPHcJbI3dqRSAoxKYW9tzLYDNkY/ANMXFzdgA7JXAzNodawHYi9HE+jdULQB7ClozUAygUgnsApcNV7vRAVjvlTJnoBqAtRI4mP9+JgZgLUbNGagGYF0MmzNQDcBYCeT2uyjUAGyVgD0D5QBslcDCfieVGkBq+uCAPQPlAGwpOLHfTakGUE7BZecM1AOYGO6VmjruJZQDsNwlMLNnoB6ApRJY++8n1gGwVAKODNQDMFQChecDtnIAlRTsmoGCAOFK4ODIQEGARXAx7MlAQYDPwUrAk4GCAMG7BFwZKAgQrARcGagIEKoEFp4MVAQIVQJr15csCAKEKgFXBioCBCoBXwYqAgQqAV8GSgIcrwR8GSgJcLwScK0DNQGOVwK+DJQEOFoJODNQEuBoJeDMQEmAo5WAMwM1AY5VAs4M1AQ4Vgk4M1ATIG2vBLwZqAlQqQR2HTJQE+BIJeDNQFGA9krAm4GiAO2VgDcDRQFaKwF3BooCtFYC7gwUBWhNQXcGqgK0VQLuDFQFaPvggDsDVQFaKgF/BqoCtFQCU9e3DSoDtFQC/gxUBWj5+JQ/A2UBmisBfwbKAjRWAoX5cyL6AI2VwGd/BsoCNFYCERkoC9C4GI7IQF2ApkogIgN1ARoqgdy/DhQGaPhGlYh1oDBAQyWwj8hAXYCGFEwiMlAYoF4JxGSgMECtEsgj1oHKALVKII3JQGGAWiVwiMlAYYBaJRCVgcIAtUpgG/U/QIUBKpVAHveKhAHK3yXwKXX/TUQdoPJdArOoDFQGKC+Gl9bvzhoPQGUxvDV9h+qoABr+L/vypAD2dYCbkwJI6wCfTgpgXgc4PymArA6QnRZA0j0DtQHW3TNQG2DRPQO1AabdM1AboKgC7E4MoFIJRL0cbYBKCr48OYBZ5wwUB0g7Z2B5e1ZDDAwJkHfOwMqZZIiBIQFMX6zl2YnuBxgYFCDpmoGV7TkfYGBQgH3XDKxWqwMMDAqQWr9r3HgmvRpgYFCAeefjceLN0Un34O0RIOuagXPv5dS8+/VXrwCTjhn4vrI9q/u+BwYG2Fj/50jLQmJbvZ4K3F/gHhgaYNHpjFQ0NOsfdn0ODA4w7ZKBTZtzfb262PU2MDxAEZ+B755sr5sfq2d/9DLwEADfU9BxRv779dnli7aN+e/x8ezunw4DDwiwDn3JsqFJa34s4wceEmBm/f+DYwVI/Rk4LoDc/9vHBfCtErg6WYDEm4FjA9h7M3BsAKl7HTgygLm7nh0ZQNalmXmsR68Ak6gbJEcEoPgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGDIx7/3OZQ4GekmpgAAAABJRU5ErkJggg==" alt="image"></span>
					<span class="cptch_span">&nbsp;=&nbsp;</span>
					<span class="cptch_span"><input id="cptch_input_84" class="cptch_input cptch_wp_comments" type="text" autocomplete="off" name="cptch_number" value="" maxlength="2" size="2" aria-required="true" required="required" style="margin-bottom:0;display:inline;font-size: 12px;width: 40px;"></span>
					<input type="hidden" name="cptch_result" value="WYhK"><input type="hidden" name="cptch_time" value="1537148768">
					<input type="hidden" name="cptch_form" value="wp_comments">
				</label><span class="cptch_reload_button_wrap hide-if-no-js">
					<noscript>
						&lt;style type="text/css"&gt;
							.hide-if-no-js {
								display: none !important;
							}
						&lt;/style&gt;
					</noscript>
					<span class="cptch_reload_button dashicons dashicons-update"></span>
				</span></span></p><!-- Subscribe to Comments Reloaded version 180225 --><!-- Subscribe to comments Reloaded MP: '/comment-subscriptions/' --><!-- BEGIN: subscribe to comments reloaded --><p class="comment-form-subscriptions"><label for="subscribe-reloaded"><select name="subscribe-reloaded" id="subscribe-reloaded">
								<option value="none">不要 订阅 评论</option>
								<option value="yes">订阅 所有评论</option>
								<option value="replies" selected="selected">订阅 我评论的回答</option>
							</select> 有新评论,请电子邮件通知我。你也不需要留评论就可以<a href="https://cokebar.info/comment-subscriptions/?srp=664&amp;srk=f4cb36d5d4b3d3411d7b455e358f0fce&amp;sra=s&amp;srsrc=f">订阅</a>。</label></p><!-- END: subscribe to comments reloaded --><p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论"> <input type="hidden" name="comment_post_ID" value="664" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p>			</form>
			</div><!-- #respond -->
	
</div><!-- #comments .comments-area -->
		</article>
	</section>
</div><!-- #content --></div><!-- #primary -->


<div id="secondary">
	

<aside id="search-3" class="widget widget_search">	<form action="https://cokebar.info/" class="searchform clearfix" method="get">
		<label class="assistive-text" for="s">搜索</label>
		<input type="text" placeholder="搜索" class="s field" name="s" autocomplete="off">
	</form></aside><aside id="text-2" class="widget widget_text"><h3 class="widget-title">公告</h3>			<div class="textwidget"><p>本人最近工作原因，没有精力进行本站的维护以及评论的回复，所以评论回复可能会有点慢。如果比较着急，想要直接和我联系，请发送邮件：cokebar@cokebar.info</p>
<p>如果不是很急，还请直接回复在相应的文章下面，我有空会回复的。如果是遇到了问题请详细说明现象、如何配置的，并提供出错信息、系统日志等信息方便排查。如果只是说“我装好了但是翻不了如何解决”我是不会回复的哦~</p>
<p>之前wordpress的邮件插件出了问题，导致评论订阅功能失效，且发送评论时候可能会卡住，目前已经解决。outlook/hotmail以及office 365等微软邮箱服务用户请注意本站邮件可能会被归到垃圾邮件，请注意，并添加白名单</p>
</div>
		</aside><aside id="tag_cloud-2" class="widget widget_tag_cloud"><h3 class="widget-title">标签</h3><div class="tagcloud"><a href="https://cokebar.info/tags/android-2" class="tag-cloud-link tag-link-67 tag-link-position-1" style="font-size: 11.230769230769pt;" aria-label="android (2个项目)">android</a>
<a href="https://cokebar.info/tags/bind" class="tag-cloud-link tag-link-62 tag-link-position-2" style="font-size: 8pt;" aria-label="bind (1个项目)">bind</a>
<a href="https://cokebar.info/tags/chinadns" class="tag-cloud-link tag-link-69 tag-link-position-3" style="font-size: 11.230769230769pt;" aria-label="chinadns (2个项目)">chinadns</a>
<a href="https://cokebar.info/tags/chrome" class="tag-cloud-link tag-link-15 tag-link-position-4" style="font-size: 8pt;" aria-label="chrome (1个项目)">chrome</a>
<a href="https://cokebar.info/tags/dig" class="tag-cloud-link tag-link-63 tag-link-position-5" style="font-size: 8pt;" aria-label="dig (1个项目)">dig</a>
<a href="https://cokebar.info/tags/dns" class="tag-cloud-link tag-link-16 tag-link-position-6" style="font-size: 22pt;" aria-label="DNS (11个项目)">DNS</a>
<a href="https://cokebar.info/tags/dnsmasq" class="tag-cloud-link tag-link-17 tag-link-position-7" style="font-size: 13.384615384615pt;" aria-label="dnsmasq (3个项目)">dnsmasq</a>
<a href="https://cokebar.info/tags/galaxy-s5" class="tag-cloud-link tag-link-20 tag-link-position-8" style="font-size: 8pt;" aria-label="galaxy s5 (1个项目)">galaxy s5</a>
<a href="https://cokebar.info/tags/gfw" class="tag-cloud-link tag-link-21 tag-link-position-9" style="font-size: 8pt;" aria-label="GFW (1个项目)">GFW</a>
<a href="https://cokebar.info/tags/gfwlist" class="tag-cloud-link tag-link-91 tag-link-position-10" style="font-size: 11.230769230769pt;" aria-label="gfwlist (2个项目)">gfwlist</a>
<a href="https://cokebar.info/tags/goagent" class="tag-cloud-link tag-link-22 tag-link-position-11" style="font-size: 11.230769230769pt;" aria-label="goagent (2个项目)">goagent</a>
<a href="https://cokebar.info/tags/google" class="tag-cloud-link tag-link-23 tag-link-position-12" style="font-size: 15.179487179487pt;" aria-label="google (4个项目)">google</a>
<a href="https://cokebar.info/tags/hosts" class="tag-cloud-link tag-link-24 tag-link-position-13" style="font-size: 8pt;" aria-label="hosts (1个项目)">hosts</a>
<a href="https://cokebar.info/tags/https" class="tag-cloud-link tag-link-25 tag-link-position-14" style="font-size: 11.230769230769pt;" aria-label="https (2个项目)">https</a>
<a href="https://cokebar.info/tags/iphone" class="tag-cloud-link tag-link-71 tag-link-position-15" style="font-size: 8pt;" aria-label="iphone (1个项目)">iphone</a>
<a href="https://cokebar.info/tags/lede" class="tag-cloud-link tag-link-124 tag-link-position-16" style="font-size: 15.179487179487pt;" aria-label="LEDE (4个项目)">LEDE</a>
<a href="https://cokebar.info/tags/openwrt" class="tag-cloud-link tag-link-27 tag-link-position-17" style="font-size: 21.282051282051pt;" aria-label="openwrt (10个项目)">openwrt</a>
<a href="https://cokebar.info/tags/pascal" class="tag-cloud-link tag-link-113 tag-link-position-18" style="font-size: 11.230769230769pt;" aria-label="pascal (2个项目)">pascal</a>
<a href="https://cokebar.info/tags/pdnsd" class="tag-cloud-link tag-link-81 tag-link-position-19" style="font-size: 13.384615384615pt;" aria-label="pdnsd (3个项目)">pdnsd</a>
<a href="https://cokebar.info/tags/pushbullet" class="tag-cloud-link tag-link-78 tag-link-position-20" style="font-size: 8pt;" aria-label="pushbullet (1个项目)">pushbullet</a>
<a href="https://cokebar.info/tags/reverse-proxy" class="tag-cloud-link tag-link-82 tag-link-position-21" style="font-size: 8pt;" aria-label="Reverse Proxy (1个项目)">Reverse Proxy</a>
<a href="https://cokebar.info/tags/samsung" class="tag-cloud-link tag-link-29 tag-link-position-22" style="font-size: 8pt;" aria-label="Samsung (1个项目)">Samsung</a>
<a href="https://cokebar.info/tags/shadowsocks" class="tag-cloud-link tag-link-30 tag-link-position-23" style="font-size: 21.282051282051pt;" aria-label="shadowsocks (10个项目)">shadowsocks</a>
<a href="https://cokebar.info/tags/shadowsocks-libev" class="tag-cloud-link tag-link-125 tag-link-position-24" style="font-size: 11.230769230769pt;" aria-label="shadowsocks-libev (2个项目)">shadowsocks-libev</a>
<a href="https://cokebar.info/tags/ss-server" class="tag-cloud-link tag-link-97 tag-link-position-25" style="font-size: 11.230769230769pt;" aria-label="ss-server (2个项目)">ss-server</a>
<a href="https://cokebar.info/tags/ssl" class="tag-cloud-link tag-link-56 tag-link-position-26" style="font-size: 8pt;" aria-label="ssl (1个项目)">ssl</a>
<a href="https://cokebar.info/tags/switchsharp" class="tag-cloud-link tag-link-32 tag-link-position-27" style="font-size: 8pt;" aria-label="switchsharp (1个项目)">switchsharp</a>
<a href="https://cokebar.info/tags/tls" class="tag-cloud-link tag-link-57 tag-link-position-28" style="font-size: 8pt;" aria-label="tls (1个项目)">tls</a>
<a href="https://cokebar.info/tags/unbound" class="tag-cloud-link tag-link-35 tag-link-position-29" style="font-size: 11.230769230769pt;" aria-label="unbound (2个项目)">unbound</a>
<a href="https://cokebar.info/tags/vpn" class="tag-cloud-link tag-link-36 tag-link-position-30" style="font-size: 11.230769230769pt;" aria-label="VPN (2个项目)">VPN</a>
<a href="https://cokebar.info/tags/vps" class="tag-cloud-link tag-link-38 tag-link-position-31" style="font-size: 11.230769230769pt;" aria-label="vps (2个项目)">vps</a>
<a href="https://cokebar.info/tags/wikipedia" class="tag-cloud-link tag-link-39 tag-link-position-32" style="font-size: 8pt;" aria-label="wikipedia (1个项目)">wikipedia</a>
<a href="https://cokebar.info/tags/windows-2" class="tag-cloud-link tag-link-61 tag-link-position-33" style="font-size: 11.230769230769pt;" aria-label="windows (2个项目)">windows</a>
<a href="https://cokebar.info/tags/world-wide-web" class="tag-cloud-link tag-link-40 tag-link-position-34" style="font-size: 8pt;" aria-label="world wide web (1个项目)">world wide web</a>
<a href="https://cokebar.info/tags/www" class="tag-cloud-link tag-link-41 tag-link-position-35" style="font-size: 8pt;" aria-label="www (1个项目)">www</a>
<a href="https://cokebar.info/tags/%e4%b8%87%e7%bb%b4%e7%bd%91" class="tag-cloud-link tag-link-42 tag-link-position-36" style="font-size: 8pt;" aria-label="万维网 (1个项目)">万维网</a>
<a href="https://cokebar.info/tags/%e4%b8%89%e6%98%9f" class="tag-cloud-link tag-link-43 tag-link-position-37" style="font-size: 8pt;" aria-label="三星 (1个项目)">三星</a>
<a href="https://cokebar.info/tags/%e4%b8%ad%e9%97%b4%e4%ba%ba%e6%94%bb%e5%87%bb" class="tag-cloud-link tag-link-59 tag-link-position-38" style="font-size: 11.230769230769pt;" aria-label="中间人攻击 (2个项目)">中间人攻击</a>
<a href="https://cokebar.info/tags/%e4%bb%a3%e7%90%86" class="tag-cloud-link tag-link-44 tag-link-position-39" style="font-size: 11.230769230769pt;" aria-label="代理 (2个项目)">代理</a>
<a href="https://cokebar.info/tags/%e5%8a%a0%e5%af%86" class="tag-cloud-link tag-link-58 tag-link-position-40" style="font-size: 8pt;" aria-label="加密 (1个项目)">加密</a>
<a href="https://cokebar.info/tags/%e5%be%ae%e8%bd%af" class="tag-cloud-link tag-link-60 tag-link-position-41" style="font-size: 8pt;" aria-label="微软 (1个项目)">微软</a>
<a href="https://cokebar.info/tags/%e7%a7%91%e5%ad%a6%e4%b8%8a%e7%bd%91" class="tag-cloud-link tag-link-45 tag-link-position-42" style="font-size: 17.871794871795pt;" aria-label="科学上网 (6个项目)">科学上网</a>
<a href="https://cokebar.info/tags/%e7%bf%bb%e5%a2%99" class="tag-cloud-link tag-link-96 tag-link-position-43" style="font-size: 15.179487179487pt;" aria-label="翻墙 (4个项目)">翻墙</a>
<a href="https://cokebar.info/tags/%e8%af%81%e4%b9%a6" class="tag-cloud-link tag-link-53 tag-link-position-44" style="font-size: 8pt;" aria-label="证书 (1个项目)">证书</a>
<a href="https://cokebar.info/tags/%e8%b7%af%e7%94%b1%e5%99%a8" class="tag-cloud-link tag-link-49 tag-link-position-45" style="font-size: 16.615384615385pt;" aria-label="路由器 (5个项目)">路由器</a></div>
</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title">分类目录</h3>		<ul>
	<li class="cat-item cat-item-2"><a href="https://cokebar.info/it-industry">IT业界</a> (9)
</li>
	<li class="cat-item cat-item-141"><a href="https://cokebar.info/vps%e8%af%84%e6%b5%8b">VPS评测</a> (1)
</li>
	<li class="cat-item cat-item-3"><a href="https://cokebar.info/internet">互联网</a> (32)
<ul class="children">
	<li class="cat-item cat-item-7"><a href="https://cokebar.info/internet/anti-gfw">科学上网</a> (18)
</li>
	<li class="cat-item cat-item-10"><a href="https://cokebar.info/internet/net-tech">网络技术</a> (14)
</li>
</ul>
</li>
	<li class="cat-item cat-item-66"><a href="https://cokebar.info/others">其他</a> (1)
</li>
	<li class="cat-item cat-item-8"><a href="https://cokebar.info/announcements">站点公告</a> (1)
</li>
	<li class="cat-item cat-item-11"><a href="https://cokebar.info/software">软件</a> (20)
<ul class="children">
	<li class="cat-item cat-item-12"><a href="https://cokebar.info/software/android">Android</a> (3)
</li>
	<li class="cat-item cat-item-13"><a href="https://cokebar.info/software/linux">Linux</a> (5)
</li>
	<li class="cat-item cat-item-127"><a href="https://cokebar.info/software/openwrt">OpenWrt</a> (9)
</li>
	<li class="cat-item cat-item-14"><a href="https://cokebar.info/software/windows">Windows</a> (3)
</li>
</ul>
</li>
		</ul>
</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h3 class="widget-title">近期评论</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">Kingbeyondwall</span>发表在《<a href="https://cokebar.info/archives/962/comment-page-23#comment-3971">Shadowsocks + GfwList 实现 OpenWRT / LEDE 路由器自动翻墙</a>》</li><li class="recentcomments"><span class="comment-author-link">ke xiao</span>发表在《<a href="https://cokebar.info/archives/664/comment-page-68#comment-3970">Shadowsocks + ChnRoute 实现 OpenWRT / LEDE 路由器自动翻墙</a>》</li><li class="recentcomments"><span class="comment-author-link"><a href="https://cokebar.info/" rel="external nofollow" class="url">cokebar</a></span>发表在《<a href="https://cokebar.info/archives/664/comment-page-68#comment-3969">Shadowsocks + ChnRoute 实现 OpenWRT / LEDE 路由器自动翻墙</a>》</li><li class="recentcomments"><span class="comment-author-link">zxx</span>发表在《<a href="https://cokebar.info/archives/664/comment-page-68#comment-3968">Shadowsocks + ChnRoute 实现 OpenWRT / LEDE 路由器自动翻墙</a>》</li><li class="recentcomments"><span class="comment-author-link">五名独慧</span>发表在《<a href="https://cokebar.info/archives/664/comment-page-68#comment-3967">Shadowsocks + ChnRoute 实现 OpenWRT / LEDE 路由器自动翻墙</a>》</li></ul></aside><aside id="calendar-2" class="widget widget_calendar"><div id="calendar_wrap" class="calendar_wrap"><table id="wp-calendar">
	<caption>2018年九月</caption>
	<thead>
	<tr>
		<th scope="col" title="星期一">一</th>
		<th scope="col" title="星期二">二</th>
		<th scope="col" title="星期三">三</th>
		<th scope="col" title="星期四">四</th>
		<th scope="col" title="星期五">五</th>
		<th scope="col" title="星期六">六</th>
		<th scope="col" title="星期日">日</th>
	</tr>
	</thead>

	<tfoot>
	<tr>
		<td colspan="3" id="prev"><a href="https://cokebar.info/archives/date/2018/01">« 1月</a></td>
		<td class="pad">&nbsp;</td>
		<td colspan="3" id="next" class="pad">&nbsp;</td>
	</tr>
	</tfoot>

	<tbody>
	<tr>
		<td colspan="5" class="pad">&nbsp;</td><td>1</td><td>2</td>
	</tr>
	<tr>
		<td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td>
	</tr>
	<tr>
		<td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td><td>16</td>
	</tr>
	<tr>
		<td id="today">17</td><td>18</td><td>19</td><td>20</td><td>21</td><td>22</td><td>23</td>
	</tr>
	<tr>
		<td>24</td><td>25</td><td>26</td><td>27</td><td>28</td><td>29</td><td>30</td>
	</tr>
	</tbody>
	</table></div></aside>
</div><!-- #secondary --></div><!-- #container -->


	   </div><!-- #main -->

	   
	   	
	   
	   <footer id="footerarea" class="clearfix">
			


<div id="site-generator">
				<div class="container"><div class="copyright">Copyright © 2018 <a href="https://cokebar.info/" title="飞羽博客"><span>飞羽博客</span></a> 主题作者: <a href="http://colorlib.com/wp/travelify/" target="_blank" title="Colorlib"><span>Colorlib</span></a>  光荣地使用 <a href="http://wordpress.org/" target="_blank" title="WordPress"><span>WordPress</span></a> </div><!-- .copyright --><div class="footer-right">本站文章采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0 授权条款</a>授权&nbsp;&nbsp;.<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="CC授权条款" style="border-width:0" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/80x15.png">&nbsp;&nbsp;&nbsp;&nbsp;</a></div><div style="clear:both;"></div>
			</div><!-- .container -->
			</div><!-- #site-generator --><div class="back-to-top" style="display: none;"><a href="https://cokebar.info/archives/664#branding"></a></div>		</footer>
	   
			

	</div><!-- .wrapper -->

	 


		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-47510805-1', 'auto');
			ga('require', 'linkid', 'linkid.js');
			ga('set', 'forceSSL', true);
			ga('send', 'pageview');
		</script>

	<link rel="stylesheet" id="crayon-css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/crayon.min.css" type="text/css" media="all">
<link rel="stylesheet" id="google_font_ubuntu-css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/css.php" type="text/css" media="all">
<link rel="stylesheet" id="font-awesome-css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/font-awesome.min.css" type="text/css" media="all">
<link rel="stylesheet" id="su-box-shortcodes-css" href="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/box-shortcodes.css" type="text/css" media="all">
<script type="text/javascript" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/comment-reply.min.js"></script>
<script type="text/javascript" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/wp-embed.min.js"></script>
<script type="text/javascript" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/jquery.js"></script>
<script type="text/javascript" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/jquery-migrate.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/cokebar.info\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/crayon.min.js"></script>
<script type="text/javascript" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/functions.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var su_other_shortcodes = {"no_preview":"\u7b80\u7801\u4e0d\u80fd\u5728\u5b9e\u65f6\u9884\u89c8\u3002\u8bf7\u628a\u5b83\u63d2\u5165\u5230\u7f16\u8f91\u5668\u7136\u540e\u518d\u7f51\u7ad9\u4e0a\u9884\u89c8\u3002"};
/* ]]> */
</script>
<script type="text/javascript" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/other-shortcodes.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var cptch_vars = {"nonce":"cb83ad9e35","ajaxurl":"https:\/\/cokebar.info\/wp-admin\/admin-ajax.php","enlarge":""};
/* ]]> */
</script>
<script type="text/javascript" src="./Shadowsocks + ChnRoute 实现 OpenWRT _ LEDE 路由器自动翻墙_files/front_end_script.js"></script>



<!--Cached using Nginx-Helper on 2018-09-17 09:46:08. It took 94 queries executed in 0.259 seconds.-->
<!--Visit http://wordpress.org/extend/plugins/nginx-helper/faq/ for more details--><div class="swiftype-widget"><div class="autocomplete" style="position: absolute; z-index: 9999; top: 263px; left: 911.625px; width: 255px; display: none;"><ul></ul></div></div></body></html>